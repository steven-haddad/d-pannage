if (self.CavalryLogger) { CavalryLogger.start_js(["s\/xoo"]); }

__d("UFIOrderingModeSelector.react",["cx","invariant","FBLogger","InlineBlock.react","Link.react","PopoverMenu.react","React","ReactXUIMenu"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReactXUIMenu").SelectableMenu,j=b("ReactXUIMenu").SelectableItem;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.onMenuItemClick=function(a,b){c.props.onOrderChanged(b.item.getValue())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this;if(this.props.orderingModes===null||this.props.orderingModes===void 0||this.props.orderingModes.length===0)return null;var c=this.props.orderingModes.filter(function(b){return b.value==a.props.selectedMode}).map(function(a){return a.name}).pop();c==null&&b("FBLogger")("comments").mustfix("Invalid ordering mode "+this.props.selectedMode+". Available modes: "+this.props.orderingModes.map(function(a){return a.value}).join(", ")+" on feedback target "+(this.props.contextArgs?this.props.contextArgs.ftentidentifier:"(unknown)"));c||h(0,5064);var d=b("React").createElement(i,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.orderingModes.map(function(c){return b("React").createElement(j,{key:c.value,value:c.value,label:c.name,selected:c.value===a.props.selectedMode},b("React").createElement("div",{className:"_3scm"},b("React").createElement("div",{className:"_3scn"},c.name),b("React").createElement("div",{className:"_3sco"},c.description)))}));return b("React").createElement("div",{className:"_3scp"},b("React").createElement(b("InlineBlock.react"),null,b("React").createElement(b("PopoverMenu.react"),{className:"_3scs",menu:d,alignh:this.props.alignh||"right"},b("React").createElement(b("Link.react"),null,c,b("React").createElement("div",{className:"_3sct"})))))};return c}(b("React").Component);e.exports=a}),null);
__d("CommentsOrderingModeSelectorUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAvailableOrders=function(a){this.$1.available_orders=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setEndOrder=function(a){this.$1.end_order=a;return this};c.setPostFbid=function(a){this.$1.post_fbid=a;return this};c.setPostOwnerFbid=function(a){this.$1.post_owner_fbid=a;return this};c.setStartOrder=function(a){this.$1.start_order=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={available_orders:!0,end_order:!0,post_fbid:!0,post_owner_fbid:!0,start_order:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("UFIOrderingModeSelectorContainer.react",["CommentsOrderingModeSelectorUsageTypedLogger","Random","React","SubscriptionsHandler","UFIConfig","UFIInstanceAction","UFIOrderingModeSelector.react","UFIOrderingModeStore","UFISharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={selectedMode:b("UFIOrderingModeStore").getState().get(d.props.contextArgs.instanceid)},d.$1=null,d.onOrderChanged=function(a){var c=d.props.feedback;if(c.orderingmodes&&b("UFIConfig").logChangeOrderingModeUsageSampleRate>b("Random").random()){var e=c.orderingmodes.map(function(a){return a.value});new(b("CommentsOrderingModeSelectorUsageTypedLogger"))().setStartOrder(d.state.selectedMode).setEndOrder(a).setPostFbid(c.commentstargetfbid).setPostOwnerFbid(c.ownerid).setAvailableOrders(e).log()}b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeOrderingMode(d.props.contextArgs,a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("UFIOrderingModeStore").addListener(function(){if(!a.$1)return;a.setState({selectedMode:b("UFIOrderingModeStore").getState().get(a.props.contextArgs.instanceid)})}))};d.componentWillUnmount=function(){this.$1&&(this.$1.release(),this.$1=null)};d.shouldComponentUpdate=function(a,b){return this.state.selectedMode!==b.selectedMode};d.render=function(){return b("React").createElement(b("UFIOrderingModeSelector.react"),{alignh:this.props.alignh||"right",onOrderChanged:this.onOrderChanged,orderingModes:this.props.feedback.orderingmodes,selectedMode:this.state.selectedMode,contextArgs:this.props.contextArgs})};return c}(b("React").Component);c.propTypes={feedback:a.shape({defaultcommentorderingmode:a.string.isRequired,orderingmodes:a.arrayOf(a.shape({name:a.string.isRequired,description:a.string.isRequired,selected:a.bool.isRequired,value:a.string.isRequired})).isRequired,commentstargetfbid:a.string.isRequired,ownerid:a.string.isRequired}).isRequired,contextArgs:a.object.isRequired,alignh:a.string};e.exports=c}),null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/inline_photo_pivots_chaining/events/",{})}),null);
__d("EntstreamAttachmentRelatedShare",["csx","cx","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CSS","DOM","Event","SubscribeButton","XPubcontentInlinePhotoPivotsEventsController","ge","getOrCreateDOMID","tidyEvent"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=2,j=3;a={loadSuggestedShowsPivotAttachment:function(a,c,d){var e=b("ge")(a);if(!e)return;var f=b("Arbiter").subscribe(b("SubscribeButton").SUBSCRIBED,function(a,g){f.unsubscribe();if(g.profile_id!==c.toString())return;b("Arbiter").inform(b("AttachmentRelatedShareConstants").SHOW_FOLLOW_CLICK,{attachment:e,pageID:c,storyID:d})})},loadRelatedAttachment:function(a,c,d){var e=null;typeof a==="string"?e=b("ge")(a):e=a;if(!e)return;var f=b("Event").listen(e,"click",function(){f.remove(),b("Arbiter").inform(b("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:e,global_share_id:c,is_right_click:!1,share_id:d})}),g=b("Event").listen(e,"mousedown",function(a){(a.which===j||a.button===i)&&(g.remove(),b("Arbiter").inform(b("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:e,global_share_id:c,is_right_click:!0}))})},loadInlineStoryPivotAttachment:function(a,c){var d=b("ge")(a);if(!d)return;var e=b("Event").listen(d,"click",function(){e.remove(),b("Arbiter").inform(b("AttachmentRelatedShareConstants").PHOTO_CLICK,{attachment:d,storyid:c})})},loadRelatedGameAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:d,global_share_id:c})}));b("tidyEvent")(b("Event").listen(d,"mousedown",function(a){(a.which===j||a.button===i)&&b("Arbiter").inform(b("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:d,global_share_id:c})}))},loadRelatedLSCVideoAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;var e=b("Event").listen(d,"click",function(){e.remove(),b("Arbiter").inform(b("AttachmentRelatedShareConstants").VIDEO_CLICK,{attachment:d,global_share_id:c})})},loadRelatedLSCInlineVideoAttachment:function(a,c){__p&&__p();var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("Event").listen(d,"click",function(){__p&&__p();var a="^div._4-u2",e="_1d8v";a=b("DOM").scry(d,a);a=a.length===1?a[0]:null;var f=a.parentNode,g=f.previousSibling;while(!g)f=f.parentNode,g=f.previousSibling;if(!b("CSS").hasClass(g,e))var f=b("DOM").create("div",{className:e}),e=b("DOM").insertBefore(a.parentNode,f),a=e.length>=1?e[0]:null;else a=g;f=b("getOrCreateDOMID")(a);new(b("AsyncRequest"))().setURI("/ajax/flash/expand_inline.php").setData({share_id:c,target_div:f,max_width:470,max_height:264,replace_target_div:!0}).setMethod("GET").setReadOnly(!0).setRelativeTo(d.parentNode).send()})},loadRelatedEventsPivotAttachment:function(a,c){var d=null;typeof a==="string"?d=b("ge")(a):d=a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").EVENT_JOIN,{attachment:d,event_id:c})}))},loadMapAttachment:function(a,c,d){a=typeof a==="string"?b("ge")(a):a;if(!a)return;var e=typeof c==="string"?b("ge")(c):c;if(!e)return;b("tidyEvent")(b("Event").listen(a,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").MAP_CLICK,{attachment:e,story_id:d})}))},loadMapAttachmentActionButton:function(a,c){var d=typeof a==="string"?b("ge")(a):a;if(!d)return;b("tidyEvent")(b("Event").listen(d,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK,{button:d,story_id:c})}))},closeButton:function(a,c){b("Event").listen(a,"click",function(){b("DOM").remove(c)})},closeButtonPhotoPivots:function(a,c,d,e){b("Event").listen(a,"click",function(){var a=b("XPubcontentInlinePhotoPivotsEventsController").getURIBuilder(),f={story_id:d,search_query_type:e,event:"hide"};new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI()).setData(f).send();b("DOM").remove(c)})},seeAllLinkPhotoPivots:function(a,c,d){b("Event").listen(a,"click",function(){var a=b("XPubcontentInlinePhotoPivotsEventsController").getURIBuilder(),e={story_id:c,search_query_type:d,event:"see_all"};new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI()).setData(e).send()})},removeOldSuggestions:function(a){a=b("ge")(a);if(!a)return;var c=b("DOM").scry(a.parentNode,"._5d73");for(var a=1;a<c.length;a++)b("DOM").remove(c[a]);window.setTimeout(function(){b("CSS").show(c[0])},1e3)},showHiddenSuggestions:function(a){__p&&__p();var c=b("Event").listen(a,"click",function(){c.remove();var d="^._1ui8";d=b("DOM").scry(a,d);if(!d)return;b("CSS").hide(d[0]);d=d[0].previousSibling;while(d)b("CSS").show(d),d=d.previousSibling})}};e.exports=a}),null);
__d("FeedTrackingAsync",["Arbiter","Run","collectDataAttributes"],(function(a,b,c,d,e,f){__p&&__p();var g;e.exports.init=function(){__p&&__p();if(g)return;g=b("Arbiter").subscribe("AsyncRequest/send",function(a,c){a=c.request;c=a.getRelativeTo();if(c){a=a.getData();c=b("collectDataAttributes")(c,["ft"]);c.ft&&Object.keys(c.ft).length&&Object.assign(a,c)}});b("Run").onLeave(function(){g&&(g.unsubscribe(),g=null)})}}),null);