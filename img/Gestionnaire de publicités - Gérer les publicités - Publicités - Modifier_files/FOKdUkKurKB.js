if (self.CavalryLogger) { CavalryLogger.start_js(["yiE8T"]); }

__d("AdsCanvasInlineBuilderMarkRedirectToAdSetProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a={initialState:{hasBeenRedirected:!1}};e.exports=a}),null);
__d("AdsCanvasInlineBuilderMarkRedirectToAdSetProvider",["Laminar","AdsCanvasInlineBuilderMarkRedirectToAdSetProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsCanvasInlineBuilderMarkRedirectToAdSetProviderPlugin"),"AdsCanvasInlineBuilderMarkRedirectToAdSetProviderPlugin")}),null);
__d("AdsCanvasInlineBuilderMarkRedirectToAdSetReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{hasBeenRedirected:!0}}};e.exports=a}),null);
__d("AdsCanvasInlineBuilderMarkRedirectToAdSetAction",["Laminar","AdsCanvasInlineBuilderMarkRedirectToAdSetReducerPlugin","AdsCanvasInlineBuilderMarkRedirectToAdSetProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsCanvasInlineBuilderMarkRedirectToAdSetReducerPlugin"),b("AdsCanvasInlineBuilderMarkRedirectToAdSetProvider"),{})]},function(){return[]},"ADS.CANVAS.INLINE.BUILDER_MARK_REDIRECT_TO_AD_SET");e.exports=a}),null);
__d("AdsCanvasInlineBuilderPreviewCanvasDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"PREVIEW_CANVAS");e.exports=a}),null);
__d("AdsCanvasInlineTransformCanvasDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"ADS.CANVAS.INLINE.TRANSFORM_CANVAS");e.exports=a}),null);
__d("AdsCanvasTemplatesTemplatesLoadFailedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"CANVAS.TEMPLATES.TEMPLATES_LOAD_FAILED"}}),null);
__d("adsCanvasInlineBuilderActionBarSelector",["AdsCanvasCurrentCanvasIDStore","AdsCanvasInlineUIStore","AdsCanvasLeadFormElement","AdsLeadGenFormEditorViewStore","RichMediaEditorStore","adsCanvasAllDocumentElementsSelector","adsCanvasAllDocumentsSelector","adsCanvasBuilderLeadAdsToSSelector","adsCanvasDocumentProductSetIDSelector","adsCanvasHasElementUploadingSelector","adsCanvasLeadFormSelector","adsCanvasProductsElementTemplatePluginSelector","adsCreateSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){return a.map(function(a){return a.adgroup.id})},{name:e.id+".adgroupIDsSelector"});c=b("adsCreateSelector")([b("adsCanvasAllDocumentsSelector"),b("adsCanvasAllDocumentElementsSelector"),b("AdsCanvasInlineUIStore").getTemplateID,b("adsCanvasDocumentProductSetIDSelector"),b("adsCanvasProductsElementTemplatePluginSelector"),a,b("adsCanvasHasElementUploadingSelector"),b("AdsCanvasCurrentCanvasIDStore").getActiveCanvasIndex,b("RichMediaEditorStore").getDocumentEditState,b("RichMediaEditorStore").getError,b("RichMediaEditorStore").getSendingPreview,b("AdsLeadGenFormEditorViewStore").getOptionalFormID,b("adsCanvasLeadFormSelector"),b("AdsLeadGenFormEditorViewStore").getIsCanvasFormUnsaved,b("adsCanvasBuilderLeadAdsToSSelector")],function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=a.every(function(a){return a.hasValue()})&&c.flatten(!0).every(function(a){return a.hasValue()})&&f.hasValue();if(!q)return{isReady:!1};q=a.map(function(a){return a.getValueEnforcing()});a=c.map(function(a){return a.map(function(a){return a.getValueEnforcing()})});c=!1;var r=!1;a.map(function(a){return a.map(function(d){d instanceof b("AdsCanvasLeadFormElement")&&(c=!0,r=a.count()>1)})});return{activeCanvasIndex:i,adgroupIDs:g,allCanvases:q,allElements:a,canvasTemplateID:d,documentEditState:j,error:k,hasElementUploading:h,isReady:!0,isRichForm:r,isSendingPreview:l,productSetID:e,templatePlugin:f.getValueEnforcing(),leadGenFormID:c?m:null,leadGenForm:c?n:null,isCanvasLeadFormUnsaved:o,isLeadGenTosAccepted:p}},{name:e.id});e.exports=c}),null);
__d("adsCanvasInlineBuilderSelector",["adsCanvasAllDocumentElementsSelector","adsCanvasAllDocumentsSelector","adsCanvasInlineBuilderShouldTransformInlineCanvas","adsCreateSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsCanvasAllDocumentsSelector"),b("adsCanvasAllDocumentElementsSelector")],function(a,c){__p&&__p();var d=a.every(function(a){return a.hasValue()})&&c.flatten(!0).every(function(a){return a.hasValue()});if(!d)return{areCanvasesLoaded:!1,areCanvasReady:!1};d=a.map(function(a){return a.getValueEnforcing()});var e=c.map(function(a){return a.map(function(a){return a.getValueEnforcing()})});if(d.some(function(a){return!!a.dynamicSetting}))return{allCanvases:d,hasCanvasDynamic:!0};return d.some(function(a,c){return b("adsCanvasInlineBuilderShouldTransformInlineCanvas")(a,e.get(c))})?{allCanvases:d,allElements:e,areCanvasesLoaded:!0,areCanvasReady:!1,hasCanvasDynamic:!1}:{areCanvasesLoaded:!0,areCanvasReady:!0,hasCanvasDynamic:!1}},{name:e.id});e.exports=a}),null);
__d("adsCanvasInlineEditorRichFormAdAccountSupportedSelector",["AdsAccountStore","AdsLeadGenQEStatusValue","AdsLeadGenQEStoreUtils","adsCreateSelector"],(function(a,b,c,d,e,f){"use strict";a=b("adsCreateSelector")([b("AdsAccountStore").getSelectedAccount_LEGACY],function(a){return!!a&&g(a.account_id)},{name:e.id});function g(a){var c=b("AdsLeadGenQEStoreUtils").canSeeRichFormL1UpsellNux(a);return c===b("AdsLeadGenQEStatusValue").ON||c===b("AdsLeadGenQEStatusValue").OFF&&b("AdsLeadGenQEStoreUtils").canBeInRichFormTemplateExperiment(a)===b("AdsLeadGenQEStatusValue").ON&&b("AdsLeadGenQEStoreUtils").canSeeRichFormOptionalComponent(a)===b("AdsLeadGenQEStatusValue").ON}e.exports=a}),null);
__d("adsCanvasInlineEditorCanHandleLeadFormSelector",["AdsLeadGenConstants","adsCanvasInlineEditorCurrentTemplateIDSelector","adsCanvasInlineEditorRichFormAdAccountSupportedSelector","adsCanvasInlineEditorRichFormFormatSupportedSelector","adsCanvasInlineEditorRichFormObjectiveSupportedSelector","adsCreateSelector"],(function(a,b,c,d,e,f){"use strict";a=b("adsCreateSelector")([b("adsCanvasInlineEditorCurrentTemplateIDSelector"),b("adsCanvasInlineEditorRichFormObjectiveSupportedSelector"),b("adsCanvasInlineEditorRichFormFormatSupportedSelector"),b("adsCanvasInlineEditorRichFormAdAccountSupportedSelector")],function(a,c,d,e){a=a!=null&&b("AdsLeadGenConstants").CANVAS_TEMPLATE_SUPPORTS_RICH_FORM.has(a);a=a&&c&&d;if(!a)return!1;else return e},{name:e.id});e.exports=a}),null);
__d("AdsCanvasTemplatesStore",["AdsCanvasTemplatesDataDispatcher","AdsCanvasTemplatesTemplatesLoadedDataActionFlux","AdsCanvasTemplatesTemplatesLoadFailedDataActionFlux","AdsDataAtom","FluxLoadObjectStore","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getActionTypes=function(){return g?[this.getActionTypeStartLoad(),b("AdsCanvasTemplatesTemplatesLoadFailedDataActionFlux").actionType,b("AdsCanvasTemplatesTemplatesLoadedDataActionFlux").actionType]:null};d.reduce=function(a,c){__p&&__p();c=c.action;var d,e;switch(c.type){case b("AdsCanvasTemplatesTemplatesLoadedDataActionFlux").actionType:d=c.adsCanvasTemplateKey;e=c.canvasTemplates;return typeof d==="object"?this.__handleOne(a,d,b("immutable").List(e)):a;case b("AdsCanvasTemplatesTemplatesLoadFailedDataActionFlux").actionType:d=c.adsCanvasTemplateKey;e=c.error;return this.__handleOne(a,d,e);default:return a}};d.__load=function(a){b("AdsCanvasTemplatesDataDispatcher").getCanvasTemplatesByKey(a)};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsCanvasTemplateKey",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({accountID:void 0,objective:void 0,promotedObjectType:void 0,selectedUIMediaFormat:void 0});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("AdsCanvasInlineBuilderActionBar.react",["ix","cx","fbt","AdsCanvasWebdriverIDs","AdsFBIconDownsized.react","Image.react","LoadingIndicator.react","React","SUIButton.react","SUITooltip.react","asset","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("gkx")("677817")?null:b("React").createElement("div",{className:"_28r_"},b("React").createElement(b("SUIButton.react"),{"data-testid":b("AdsCanvasWebdriverIDs").ADS_CANVAS_INLINE_BUILDER_PREVIEW_BUTTON,disabled:this.props.hasLeadGenForm===!0||this.props.disabled||this.props.hasElementUploading,icon:b("React").createElement(b("AdsFBIconDownsized.react"),{src:g("407232")}),label:i._("Aper\u00e7u sur mobile"),ref:"inlineBuilderPreviewButton",tooltip:this.props.hasLeadGenForm===!0?this.props.isRichForm===!0?i._("This template doesn't support previews on mobile when it includes a contact form."):i._("Ce mod\u00e8le ne prend pas en charge les aper\u00e7us sur mobile."):null,onClick:this.props.onClickPreview}));return b("React").createElement("div",{className:"_28rz"},this.$1(),this.$2(),a,b("React").createElement(b("SUIButton.react"),{"data-testid":b("AdsCanvasWebdriverIDs").ADS_CANVAS_INLINE_BUILDER_FINISH_BUTTON,disabled:this.props.disabled||this.props.hasElementUploading||this.props.hasLeadGenForm===!0&&!this.props.isLeadGenTosAccepted,label:this.$3()?i._("Enregistrement..."):i._("Termin\u00e9"),tooltip:this.props.hasLeadGenForm===!0&&this.props.isLeadGenTosAccepted!==!0?i._("Pour utiliser un formulaire sur une pub, votre Page doit accepter les Conditions de service des pubs \u00e0 formulaire."):null,use:"confirm",onClick:this.props.onClickDone}))};d.$3=function(){return this.props.disabled&&!(this.props.hasLeadGenForm===!0&&!this.props.isLeadGenTosAccepted)};d.$1=function(){return!this.$3()?null:b("React").createElement("div",{className:"_28r_"},b("React").createElement(b("LoadingIndicator.react"),{color:"white","data-testid":b("AdsCanvasWebdriverIDs").TOOLBAR_LOADING_INDICATOR,size:"medium"}))};d.$2=function(){var a=this.props.error;if(!a)return null;var c=g("380535");return b("React").createElement("div",{className:"_2lei"},b("React").createElement(b("SUITooltip.react"),{tooltip:a.message},b("React").createElement(b("Image.react"),{src:c})))};return c}(b("React").Component);e.exports=a}),null);
__d("AdsCanvasInlineBuilderActionBarContainer.react",["AdsCanvasBuilderUtils","AdsCanvasEditorEnums","AdsCanvasInlineBuilderActionBar.react","AdsCanvasInlineBuilderActions","AdsCanvasInlineBuilderPreviewCanvasDataAction","AdsCanvasInlineBuilderUtils","AdsFluxContainer","AdsLeadGenConstants","AdsLeadGenFormEditorFunnelLogger","AdsLeadGenFormEditorFunnelLoggerConstants","AdsUEditorContextType","AsyncRequest","React","RichMediaEditorActions","XMobileCanvasAdPreviewController","adsCanvasInlineBuilderActionBarSelector","emptyFunction","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasEditorEnums").SaveStateEnum;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){if(!d.state.isReady)return;d.state.canvasTemplateID===b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID&&b("AdsLeadGenFormEditorFunnelLogger").appendAction(b("AdsLeadGenFormEditorFunnelLoggerConstants").FUNNEL_LOGGING_EVENTS.CLICK_PUBLISH_FORM);d.$3(b("nullthrows")(d.context.onDoneSuccess),b("emptyFunction"));b("AdsCanvasInlineBuilderActions").inlineTemplateBuilderDone()},d.$2=function(){if(!d.state.isReady)return;d.$3(d.$4,b("emptyFunction"));b("AdsCanvasInlineBuilderActions").inlineTemplateBuilderMobilePreview()},d.$4=function(a,c){if(!a){b("RichMediaEditorActions").setPreviewFailed(!0);return}b("RichMediaEditorActions").setSendingPreview(!0);c=b("XMobileCanvasAdPreviewController").getURIBuilder().setString("node_id",a).setString("page_id",d.context.pageID).setBool("is_id_encoded",isNaN(a)).getURI();a=new(b("AsyncRequest"))().setURI(c).setHandler(function(a){b("AdsCanvasInlineBuilderPreviewCanvasDataAction").dispatch({},{line:"177",module:"AdsCanvasInlineBuilderActionBarContainer.react.js"})});a.send()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a,c){a=c.adgroupEditorContext;return b("adsCanvasInlineBuilderActionBarSelector").getStores(a)};c.calculateState=function(a,c,d){a=d.adgroupEditorContext;return b("adsCanvasInlineBuilderActionBarSelector")(a)};var d=c.prototype;d.render=function(){return!this.state.isReady?b("React").createElement(b("AdsCanvasInlineBuilderActionBar.react"),{disabled:!0,error:null,hasElementUploading:!1,ref:"inlineBuilderActionBar",onClickDone:this.$1,onClickPreview:this.$2}):b("React").createElement(b("AdsCanvasInlineBuilderActionBar.react"),{disabled:this.state.documentEditState===g.SAVING||this.state.isSendingPreview,error:this.state.error,hasElementUploading:this.state.hasElementUploading,hasLeadGenForm:this.state.leadGenFormID!=null,isLeadGenTosAccepted:this.state.isLeadGenTosAccepted,isRichForm:this.state.isRichForm,ref:"inlineBuilderActionBar",onClickDone:this.$1,onClickPreview:this.$2})};d.$3=function(a,c){if(!this.state.isReady)return;var d=this.state.productSetID!==null?this.state.productSetID:this.context.productSetID;this.state.allCanvases.count()>1?this.state.isReady&&b("AdsCanvasInlineBuilderUtils").saveAllCanvases(a,c,this.state.adgroupIDs,this.state.templatePlugin,this.state.allCanvases,this.state.allElements,d,this.context.pageID,this.context.adgroupEditorContext):this.state.isReady&&b("AdsCanvasInlineBuilderUtils").saveCurrentCanvas(a,c,this.state.activeCanvasIndex,this.state.adgroupIDs,this.state.allCanvases,this.state.allElements,this.state.documentEditState,this.state.templatePlugin,this.state.leadGenFormID,this.state.isCanvasLeadFormUnsaved,d,this.state.leadGenForm,this.context.pageID,this.context.adgroupEditorContext,!1)};return c}(b("React").PureComponent);a.contextTypes=babelHelpers["extends"]({},b("AdsCanvasBuilderUtils").getContextTypes(),b("AdsUEditorContextType").adgroup);e.exports=b("AdsFluxContainer").create(a,{withContext:!0,name:e.id})}),null);
__d("AdsCanvasInlineBuilderTour.react",["cx","AdsCanvasInlineBuilderActions","AdsCanvasInlineContent","ContextualLayerUpdateOnScroll","React","SimpleNUXMessage","SUIBusinessTheme","SUIText.react","Text.react","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={424787857903852:"BRAND",1063217037112304:"RETAIL",133471657203838:"ACQUISITION"},i={BRAND:{nuxName:"727232757449618",steps:b("AdsCanvasInlineContent").INLINE_CREATION_BRAND_RETAIL_TOUR_MAX_STEPS,tour:b("AdsCanvasInlineContent").INLINE_CREATION_BRAND_RETAIL_TOUR},RETAIL:{nuxName:"727232757449618",steps:b("AdsCanvasInlineContent").INLINE_CREATION_BRAND_RETAIL_TOUR_MAX_STEPS,tour:b("AdsCanvasInlineContent").INLINE_CREATION_BRAND_RETAIL_TOUR},ACQUISITION:{nuxName:"175599466304273",steps:b("AdsCanvasInlineContent").INLINE_CREATION_ACQUISITION_TOUR_MAX_STEPS,tour:b("AdsCanvasInlineContent").INLINE_CREATION_ACQUISITION_TOUR}};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){b("AdsCanvasInlineBuilderActions").inlineBuilderNuxTourXout(d.state.currentStep,d.props.templateID),d.$4()};d.$2=function(){b("AdsCanvasInlineBuilderActions").inlineBuilderNuxTourComplete(d.state.currentStep,d.props.templateID),d.$4()};d.$3=function(){if(d.state.currentStep==null)return;d.setState({currentStep:d.state.currentStep+1})};c=h[d.props.templateID];c=i[c];if(!c){d.state={currentStep:null,hasTour:!1,nuxName:null,nuxShown:!1,tour:null,tourSteps:0};return babelHelpers.assertThisInitialized(d)}var e=c.nuxName;if(!e){d.state={currentStep:null,hasTour:!1,nuxName:null,nuxShown:!1,tour:null,tourSteps:0};return babelHelpers.assertThisInitialized(d)}d.state={currentStep:0,hasTour:!0,nuxName:e,nuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(e),tour:c.tour,tourSteps:c.steps};return d}var d=c.prototype;d.render=function(){var a=this.state.currentStep;if(a==null||this.props.contextRefs==null||this.state.hasTour==!1||this.state.nuxShown==!1||this.state.tour==null||this.state.tourSteps==null||a>this.props.contextRefs.length-1||a>this.state.tourSteps-1)return null;var c=this.state.tour[a];return b("React").createElement(b("XUIAmbientNUX.react"),{alignment:c.alignment,behaviors:{ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextRef:this.props.contextRefs[a],offsetY:8,position:c.position,shown:this.state.nuxShown,width:"normal",onCloseButtonClick:this.$1},b("React").createElement(b("SUIText.react"),{className:"_4jal",shade:"white",size:"medium_DEPRECATED",theme:b("SUIBusinessTheme"),weight:"bold"},c.title),b("React").createElement(b("SUIText.react"),{className:"_4jal _4jam",shade:"white",size:"medium_DEPRECATED",theme:b("SUIBusinessTheme")},c.content),b("React").createElement("div",{className:"_4jan"},b("React").createElement("button",{className:"_4jao",href:"#",onClick:c.isFinalStep==="true"?this.$2:this.$3},b("React").createElement(b("Text.react"),{className:"_4jap"},c.buttonText))))};d.$4=function(){if(!this.state.nuxName)return;b("SimpleNUXMessage").markMessageSeenByUser(this.state.nuxName);this.setState({nuxShown:!1})};return c}(b("React").Component);e.exports=a}),null);
__d("AdsCanvasInlineBuilder.react",["cx","AdsCanvasBuilderUtils","AdsCanvasCapabilities","AdsCanvasInlineBuilderActionBarContainer.react","AdsCanvasInlineBuilderTour.react","AdsCanvasPreviewContainer.react","AdsCanvasUnifiedBuilderEditorPaneContainer.react","AdsCanvasWebdriverIDs","AdsLeadGenConstants","Layout.react","React","RichMediaEditorConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("Layout.react").Column,i=b("Layout.react").FillColumn,j=b("RichMediaEditorConstants").EDITOR_ELEMENT_CONTAINER_ID,k=b("RichMediaEditorConstants").INLINE_EDITOR_HEIGHT,l=b("RichMediaEditorConstants").INLINE_PREVIEW_WIDTH,m=b("RichMediaEditorConstants").INLINE_PREVIEW_HEIGHT_WITH_TAB,n=b("RichMediaEditorConstants").INLINE_PREVIEW_WIDTH_WITH_TAB,o=b("RichMediaEditorConstants").INLINE_PREVIEW_MARGIN_WITH_TAB;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(){return c.refs.inlineBuilderEditorContainer},c.$3=function(){var a=c.refs.inlineBuilderActionBarContainer;a=a.refs.inlineBuilderActionBar;return a.refs.inlineBuilderPreviewButton},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=k,c=l,d=0,e=this.context.canvasCapabilityConfig.hasCapability(b("AdsCanvasCapabilities").CAN_CREATE_INSTAGRAM_CANVAS);e&&this.props.templateID!==b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID&&(a=m,c=n,d=o);return b("React").createElement("div",null,b("React").createElement("div",{className:"_15ck"},b("React").createElement(b("Layout.react"),null,b("React").createElement(i,null,b("React").createElement("div",{className:"_15cl","data-testid":b("AdsCanvasWebdriverIDs").ADS_CANVAS_INLINE_BUILDER_ELEMENTS_EDITOR,id:j,ref:"inlineBuilderEditorContainer"},b("React").createElement(b("AdsCanvasUnifiedBuilderEditorPaneContainer.react"),{isInlineTemplate:!0}))),b("React").createElement(h,null,b("React").createElement("div",{className:"_15cm"},b("React").createElement(b("AdsCanvasPreviewContainer.react"),{height:a,margin:d,templateID:this.props.templateID,width:c}))))),b("React").createElement("div",{className:"_15cn"},b("React").createElement(b("AdsCanvasInlineBuilderActionBarContainer.react"),{ref:"inlineBuilderActionBarContainer"})),this.$1())};d.$1=function(){return b("React").createElement(b("AdsCanvasInlineBuilderTour.react"),{contextRefs:[this.$2,this.$2,this.$3],templateID:this.props.templateID})};return c}(b("React").Component);a.contextTypes=b("AdsCanvasBuilderUtils").getContextTypes();e.exports=a}),null);
__d("AdsCanvasInlineBuilderContainer.react",["cx","AdsCallToActionTypes","AdsCanvasBuilderUtils","AdsCanvasInitDataAction","AdsCanvasInlineBuilder.react","AdsCanvasInlineBuilderUtils","AdsCanvasInlineContent","AdsCanvasInlineTransformCanvasDataAction","AdsCanvasLoadDynamicCanvasAction","AdsCanvasWebdriverIDs","AdsFluxContainer","AdsLeadGenFormEditorClearValidationStoreAction","AdsLeadGenFormEditorClearViewStoreAction","AdsLeadGenFormEditorSetCallToActionTypeAction","AdsLeadGenFormEditorSetPageAction","React","SUIBusinessTheme","SUISpinner.react","SUIText.react","adsCanvasInlineBuilderSelector","adsCanvasInlineBuilderShouldTransformInlineCanvas","immutable","nullthrows","suiMargin","AdsCanvasCurrentCanvasIDStore","RichMediaEditorLoggerStore","RichMediaEditorStore","AdsLeadGenFormEditorStore","AdsLeadGenFormEditorValidationStore","AdsLeadGenFormEditorViewStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){b("AdsCanvasCurrentCanvasIDStore"),b("RichMediaEditorLoggerStore"),b("RichMediaEditorStore"),b("AdsLeadGenFormEditorStore"),b("AdsLeadGenFormEditorValidationStore"),b("AdsLeadGenFormEditorViewStore"),b("AdsLeadGenFormEditorClearValidationStoreAction").dispatch({},{line:"99",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorClearViewStoreAction").dispatch({},{line:"100",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorSetCallToActionTypeAction").dispatch({callToActionType:b("AdsCallToActionTypes").TYPES.SIGN_UP.name},{line:"102",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsLeadGenFormEditorSetPageAction").dispatch({page:{capabilities:b("immutable").Set(),id:this.props.pageID,name:this.props.pageName,pictureURL:this.props.pagePictureUrl||""}},{line:"106",module:"AdsCanvasInlineBuilderContainer.react.js"}),b("AdsCanvasInitDataAction").dispatch({canvasID:this.props.canvasID,pageID:this.props.pageID,source:this.props.canvasSource,supportFacebookEnabled:this.props.supportFacebookEnabled,supportInstagramEnabled:this.props.supportInstagramEnabled},{line:"115",module:"AdsCanvasInlineBuilderContainer.react.js"})};c.getStores=function(){return b("adsCanvasInlineBuilderSelector").getStores()};c.calculateState=function(){return b("adsCanvasInlineBuilderSelector")()};d.getChildContext=function(){return{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,defaultURL:this.props.defaultURL,forceChooseSpecificOrder:this.props.forceChooseSpecificOrder,pageID:this.props.pageID,pageName:this.props.pageName,productCatalogID:this.props.productCatalogID,productSetID:this.props.productSetID,theme:b("SUIBusinessTheme"),onDoneSuccess:this.props.onDoneSuccess}};d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(){this.$1()};d.render=function(){return!this.state.areCanvasReady?b("React").createElement("div",{className:"_2j_x"},b("React").createElement("div",{className:"_5_zr"},b("React").createElement(b("SUISpinner.react"),{theme:b("SUIBusinessTheme")}),b("React").createElement(b("SUIText.react"),{margin:"_3-8-",size:"meta1"},b("AdsCanvasInlineContent").INLINE_BUILDER_LOADING))):b("React").createElement("div",{className:"_2j_x","data-testid":b("AdsCanvasWebdriverIDs").ADS_CANVAS_INLINE_BUILDER},b("React").createElement(b("AdsCanvasInlineBuilder.react"),{templateID:this.props.templateID}))};d.$1=function(){this.state.hasCanvasDynamic&&this.$2(this.state.allCanvases),this.state.areCanvasesLoaded&&!this.state.areCanvasReady&&this.$3(this.state.allCanvases,this.state.allElements)};d.$2=function(a){a=a.get(0);a=b("nullthrows")(a.dynamicSetting);a=a.childDocumentIDs;b("AdsCanvasLoadDynamicCanvasAction").dispatch({canvasIDs:h(a)},{line:"197",module:"AdsCanvasInlineBuilderContainer.react.js"})};d.$3=function(a,c){__p&&__p();var d=this;a.map(function(e,f){if(b("adsCanvasInlineBuilderShouldTransformInlineCanvas")(e,c.get(f))){e=b("AdsCanvasInlineBuilderUtils").duplicateTemplateSourceDocument(e,c.get(f),d.props.templateID,d.props.defaultURL,d.props.canvasSource,!1,d.props.forceChooseSpecificOrder);var g=e.canvasDocument;e=e.elements;a=a.set(f,g);c=c.set(f,e)}});b("AdsCanvasInlineTransformCanvasDataAction").dispatch({canvases:a,elements:c.flatten(!0)},{line:"233",module:"AdsCanvasInlineBuilderContainer.react.js"})};return c}(b("React").PureComponent);a.childContextTypes=b("AdsCanvasBuilderUtils").getContextTypes();e.exports=b("AdsFluxContainer").create(a,{withProps:!0,name:e.id})}),null);
__d("AdsCanvasInlineBuilderDialog.react",["cx","fbt","AdsCanvasInlineBuilderContainer.react","AdsCanvasInlineContent","AdsCCCategory","AdsStaticInlineNux.react","LayerFadeOnHide","React","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidUpdate=function(){this.refs.dialog&&this.refs.dialog.layer.subscribe("beforehide",this.props.onBeforeHide)};d.render=function(){if(this.props.canvasID==null||this.props.canvasID===""||!this.props.isShown)return null;return this.props.pageID==null||this.props.pageID===""?this.$1():b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},key:"dialog",ref:"dialog",shown:this.props.isShown,useCustomPadding:!0,width:836,onToggle:this.props.onToggle},b("React").createElement(b("XUIDialogTitle.react"),null,this.props.createFromTemplate?b("AdsCanvasInlineContent").INLINE_BUILDER_TITLE_CREATE:b("AdsCanvasInlineContent").INLINE_BUILDER_TITLE_EDIT),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},b("React").createElement(b("AdsCanvasInlineBuilderContainer.react"),{accessToken:this.props.accessToken,businessID:this.props.businessID,canvasCapabilityConfig:this.props.canvasCapabilityConfig,canvasID:this.props.canvasID,canvasSource:this.props.canvasSource,defaultURL:this.props.defaultURL,forceChooseSpecificOrder:!1,pageID:b("nullthrows")(this.props.pageID),pageName:this.props.pageName,pagePictureUrl:this.props.pagePictureUrl,productCatalogID:this.props.productCatalogID,productSetID:this.props.productSetID,supportFacebookEnabled:this.props.supportFacebookEnabled,supportInstagramEnabled:this.props.supportInstagramEnabled,templateID:b("nullthrows")(this.props.templateID),onDoneSuccess:this.props.onDoneSuccess})))};d.$1=function(){return b("React").createElement("div",{className:"_21uh"},b("React").createElement(b("AdsStaticInlineNux.react"),{ccCardProps:{category:b("AdsCCCategory").ERROR,messageID:"message_that_the_advertiser_has_no_role_for_selected_page",textData:[{type:"PARAGRAPH",data:{text:h._("Aucune page n\u2019est s\u00e9lectionn\u00e9e. Vous devez \u00eatre administrateur d\u2019une Page pour cr\u00e9er des pubs Instant Experience pour cette Page.")}}]}}))};return c}(b("React").Component);e.exports=a}),null);
__d("adsUEditorCanvasPageSelector",["AdsBulkValueUtils","AdsCanvasPageGetter","AdsUEditorAdgroupBulkSelectors","AdsUnifiedCreativeAPIFields","adsCreateStoreSelector"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID);a=b("adsCreateStoreSelector")(function(a){return[].concat(g.getStores(a),b("AdsCanvasPageGetter").getStores())},function(a){a=b("AdsBulkValueUtils").getUniformValue(g(a),null);return!a?null:b("AdsCanvasPageGetter").get({id:a})},e.id+".selector");e.exports=a}),null);
__d("adsUEditorAdgroupCanvasDefaultURLSelector",["AdsAPICampaignPaths","AdsCanvasAdUtils","AdsLoadState_LEGACY","adsCreateSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorCanvasPageSelector","firstx"],(function(a,b,c,d,e,f){"use strict";a=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector"),b("adsUEditorCanvasPageSelector")],function(a,c){if(b("AdsCanvasAdUtils").someHaveMobileAppPromotedObjectType(a)){a=b("firstx")(a).campaign.getIn(b("AdsAPICampaignPaths").PROMOTED_OBJECT.OBJECT_STORE_URL);return a?a:""}a=c?c.loadState:b("AdsLoadState_LEGACY").LOADED;return a!==b("AdsLoadState_LEGACY").LOADED?"":c?c.link:""},{name:e.id});e.exports=a}),null);
__d("adsUEditorCanvasCapabilitySelector",["AdsAccountUtils","AdsCanvasAdUtils","AdsCanvasCapabilities","AdsCanvasCapabilityConfig","AdsLoadState_LEGACY","adsCreateSelector","adsUEditorAccountSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorCanvasPageSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("adsCreateSelector")([b("adsUEditorAccountSelector")],function(a){return b("AdsAccountUtils").hasCapability(a,"ADS_PE_CANVAS_CAN_ADD_PRODUCT_SET")},{name:e.id+".canAddProductSetSelector"});c=b("adsCreateSelector")([b("adsUEditorCanvasPageSelector")],function(a){return a?a.loadState===b("AdsLoadState_LEGACY").LOADED&&(a.location&&!!a.location.street||a.locations&&a.locations.summary&&a.locations.summary.total_count>0):!1},{name:e.id+".canAddStoreLocatorSelector"});d=b("adsCreateSelector")([b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a){return b("AdsCanvasAdUtils").someHaveMobileAppPromotedObjectType(a)},{name:e.id+".isMobileAppDestinationAdSelector"});f=b("adsCreateSelector")([a,c,d],function(a,c,d){var e;return new(b("AdsCanvasCapabilityConfig"))((e={},e[b("AdsCanvasCapabilities").CAN_ADD_PRODUCT_SET]=a,e[b("AdsCanvasCapabilities").CAN_ADD_STORE_LOCATOR]=c,e[b("AdsCanvasCapabilities").CAN_CREATE_INSTAGRAM_CANVAS]=!0,e[b("AdsCanvasCapabilities").IS_MOBILE_APP_DESTINATION_CANVAS]=d,e))},{name:e.id});e.exports=f}),null);
__d("adsUEditorAdgroupCanvasBuilderSelector",["AdsAPIAdgroupRecordUtils","AdsAPICampaignGroupPaths","AdsAPICampaignPaths","AdsBulkValueUtils","AdsCanvasAdUtils","AdsCanvasConstants","AdsCanvasInlineUIStore","AdsCanvasInstagramConstants","AdsLoadState_LEGACY","AdsUEditorAdgroupAdObjectsUtils","AdsUEditorAdgroupBulkSelectors","AdsUEditorCampaignInstagramSelectors","AdsUIMediaFormat","AdsUnifiedCreativeAPIFields","CanvasSource","adsCanvasCurrentDocumentSelector","adsCreateSelector","adsUEditorAccountSelector","adsUEditorAdgroupCanvasDefaultURLSelector","adsUEditorAdgroupIsSlideshowSelectedSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorCanvasCapabilitySelector","adsUEditorCanvasPageSelector","firstx","getByPath","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasConstants").SELL_PRODUCTS_GRID_LAYOUT_TEMPLATE_ID,h=b("AdsCanvasInstagramConstants").IG_SUPPORTED_COLLECTION_TEMPLATE_ID,i="130533530354972";a=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID);c=b("adsCreateSelector")([a,b("adsCanvasCurrentDocumentSelector")],function(a,c){var d=b("AdsCanvasAdUtils").getAdPlatformSource();if(d==b("CanvasSource").CREATIVE_STUDIO&&c.hasValue()){d=c.getValueEnforcing();if(d.owner&&d.owner.id!==i)return d.owner.id}return b("AdsBulkValueUtils").getUniformValue(a,null)},{name:e.id+".pageIDSelector"});d=b("adsCreateSelector")([b("AdsCanvasInlineUIStore").getCanvasID,b("AdsCanvasInlineUIStore").getInlineTab,b("AdsCanvasInlineUIStore").getShowInlineModal,b("AdsCanvasInlineUIStore").getTemplateID,b("adsUEditorAccountSelector"),b("adsUEditorAdgroupIsSlideshowSelectedSelector"),b("adsUEditorAdObjectsForSelectedAdgroupsSelector"),b("adsUEditorCanvasCapabilitySelector"),b("adsUEditorCanvasPageSelector"),b("adsUEditorAdgroupCanvasDefaultURLSelector"),c,b("AdsUEditorCampaignInstagramSelectors").someHaveFacebookPlacement,b("AdsUEditorCampaignInstagramSelectors").someHaveInstagramPlacement],function(a,c,d,e,f,i,j,k,l,m,n,o,p){__p&&__p();var q=j.map(function(a){a=a.adgroup;return a.id}),r=l?l.loadState:b("AdsLoadState_LEGACY").LOADED;if(r!==b("AdsLoadState_LEGACY").LOADED)return{isReady:!1};r=l?l.name:"";l=((l=l)!=null?(l=l.picture)!=null?(l=l.data)!=null?l.url:l:l:l)||"";var s=f.business;s=s?s.id:"";i=b("AdsUEditorAdgroupAdObjectsUtils").getUIMediaFormat(b("firstx")(j),i);var t=b("gkx")("700048");i=i===b("AdsUIMediaFormat").COLLECTIONS?t?h.indexOf(e)!==-1:g===e:!0;t=p&&i;p=j[0]?b("getByPath")(j[0].campaignGroup,b("AdsAPICampaignGroupPaths").PROMOTED_OBJECT.PRODUCT_CATALOG_ID):null;i=j[0]?b("getByPath")(j[0].campaign,b("AdsAPICampaignPaths").PROMOTED_OBJECT.PRODUCT_SET_ID):null;j=b("AdsAPIAdgroupRecordUtils").getSingleMediaType(b("firstx")(j).adgroup);return{adAccount:f,adMediaFormatType:j,adgroupIDs:q,businessID:s,canvasCapabilityConfig:k,canvasID:a,inlineTab:c,isReady:!0,pageID:n,pageName:r,pagePictureUrl:l,defaultURL:m,productCatalogID:p,productSetID:i,showInlineModal:d,supportFacebookEnabled:o,supportInstagramEnabled:t,templateID:e}},{name:e.id});e.exports=d}),null);
__d("adsUEditorAdgroupCanvasInlineTemplateSelector",["AdsAPICampaignRecordUtils","AdsApplicationUtils","AdsBulkValueUtils","AdsCanvasConstants","AdsCanvasInstagramConstants","AdsCanvasTemplateKey","AdsCanvasTemplatesStore","AdsEmptyUniformMixedBulkValueTypes","AdsLeadGenConstants","AdsUEditorAdgroupAdObjectsUtils","AdsUEditorCampaignGroupAdObjectsUtils","AdsUEditorCampaignInstagramSelectors","AdsUIMediaFormat","adsCanvasInlineEditorRichFormAdAccountSupportedSelector","adsCanvasInlineEditorRichFormFormatSupportedSelector","adsCanvasInlineEditorRichFormObjectiveSupportedSelector","adsCreateStoreSelector","adsUEditorAccountSelector","adsUEditorAdgroupCanvasSectionRedesignQESelector","adsUEditorAdgroupIsSlideshowSelectedSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCanvasConstants").SELL_PRODUCTS_GRID_LAYOUT_TEMPLATE_ID,h=b("AdsCanvasInstagramConstants").IG_SUPPORTED_COLLECTION_TEMPLATE_ID;a=b("adsCreateStoreSelector")(function(a){return[].concat(b("adsUEditorAccountSelector").getStores(a),b("adsUEditorAdgroupIsSlideshowSelectedSelector").getStores(a),b("adsUEditorAdObjectsForSelectedAdgroupsSelector").getStores(a),b("AdsUEditorCampaignInstagramSelectors").someHaveInstagramPlacementOnly.getStores(a),b("adsCanvasInlineEditorRichFormObjectiveSupportedSelector").getStores(a),b("adsCanvasInlineEditorRichFormFormatSupportedSelector").getStores(a),b("adsCanvasInlineEditorRichFormAdAccountSupportedSelector").getStores(a),b("adsUEditorAdgroupCanvasSectionRedesignQESelector").getStores(a),[b("AdsCanvasTemplatesStore")])},function(a){__p&&__p();var c=b("adsUEditorAccountSelector")(),d=b("adsUEditorAdObjectsForSelectedAdgroupsSelector")(a),e=c.account_id,f=b("adsUEditorAdgroupIsSlideshowSelectedSelector")(a),i=b("AdsUEditorCampaignInstagramSelectors").someHaveInstagramPlacementOnly(a);c=b("adsCanvasInlineEditorRichFormObjectiveSupportedSelector")(a);var j=b("adsCanvasInlineEditorRichFormFormatSupportedSelector")(a),k=b("adsCanvasInlineEditorRichFormAdAccountSupportedSelector")(a);a=b("adsUEditorAdgroupCanvasSectionRedesignQESelector")(a);var l=a.showRecommendedTab;a=a.isInRecommendedTabExp;var m=c&&j&&k;c=d.map(function(a){__p&&__p();var c=b("AdsUEditorCampaignGroupAdObjectsUtils").getObjective(a),d=b("AdsAPICampaignRecordUtils").getPromotedObjectType(c,a.campaign);a=b("AdsUEditorAdgroupAdObjectsUtils").getUIMediaFormat(a,f);d=new(b("AdsCanvasTemplateKey"))({accountID:e,objective:c,promotedObjectType:d,selectedUIMediaFormat:a});d=b("AdsCanvasTemplatesStore").get(d);var j=d.hasError(),k=d.hasValue();d=k?d.getValueEnforcing():b("immutable").List();k=j||k;d=d.filter(function(a){return a.id!==b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID||!b("AdsApplicationUtils").isCreativeStudio()});if(i&&a===b("AdsUIMediaFormat").COLLECTIONS){var l=b("gkx")("700048");d=d.filter(function(a){return a.id&&l?h.indexOf(a.id)!==-1:g===a.id})}return{format:a,hasLoadErrors:j,isReady:k,templates:d,accountID:e,objective:c,canHandleLeadFormInInlineTemplate:m}});j={format:b("AdsEmptyUniformMixedBulkValueTypes"),hasLoadErrors:b("AdsEmptyUniformMixedBulkValueTypes"),isReady:b("AdsEmptyUniformMixedBulkValueTypes"),templates:b("AdsEmptyUniformMixedBulkValueTypes"),accountID:b("AdsEmptyUniformMixedBulkValueTypes"),objective:b("AdsEmptyUniformMixedBulkValueTypes"),canHandleLeadFormInInlineTemplate:b("AdsEmptyUniformMixedBulkValueTypes")};k=b("AdsBulkValueUtils").aggregateDeep(j,c);return{format:b("AdsBulkValueUtils").getUniformValueOrDefault(k.format,null),hasLoadErrors:b("AdsBulkValueUtils").getUniformValueOrDefault(k.hasLoadErrors,!1),isReady:b("AdsBulkValueUtils").getUniformValueOrDefault(k.isReady,!0),templates:b("AdsBulkValueUtils").getUniformValueOrDefault(k.templates,b("immutable").List()),accountID:e,objective:b("AdsBulkValueUtils").getUniformValueOrDefault(k.objective,null),canHandleLeadFormInInlineTemplate:b("AdsBulkValueUtils").getUniformValue_DEPRECATED(k.canHandleLeadFormInInlineTemplate,!0),showRecommendedTab:l,isInRecommendedTabExp:a}},e.id);e.exports=a}),null);
__d("AdsCanvasInlineBuilderDialogContainer.react",["invariant","AdObjectLevels","AdsCanvasCloseUnsavedCanvasDialogContainer.react","AdsCanvasEditorEnums","AdsCanvasInlineBuilderActions","AdsCanvasInlineBuilderDialog.react","AdsCanvasInlineBuilderHandleLoadingModalDataAction","AdsCanvasInlineBuilderMarkRedirectToAdSetAction","AdsCanvasInlineBuilderMarkRedirectToAdSetProvider","AdsCanvasShowCloseUnsavedCanvasDialogDataAction","AdsCFNavigationWizardConstants","AdsCFNavigationWizardSectionNavigateDataAction","AdsFluxContainer","AdsLeadGenConstants","AdsLeadGenFormCreationSource","AdsLeadGenFormEditorFunnelLogger","AdsLeadGenFormEditorFunnelLoggerConstants","AdsUEditorAdgroupSetCanvasDocumentDataAction","AdsUEditorAdgroupSetHasCanvasLinkDataAction","AdsUEditorCampaignGroupAdObjectsUtils","AdsUEditorContextType","AdsUEditorHostIDs","CanvasSource","DOM","FDSSpinner.react","React","ReactDOM","RichMediaEditorStore","URIInitDataUtil","WebApiApplication","adsCanvasInlineEditorCanHandleLeadFormSelector","adsCanvasIsCurrentDocumentPublishedSelector","adsUEditorAdgroupCanvasBuilderSelector","adsUEditorAdgroupCanvasInlineTemplateSelector","adsUEditorAdgroupCanvasSectionRedesignQESelector","adsUEditorAdgroupLeadGenAutoCreationQESelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","emptyFunction","immutable","AdsLeadGenFormEditorFunnelLoggingStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsLeadGenFormEditorFunnelLoggerConstants").FUNNEL_LOGGING_TAG_PREFIXES,i=b("URIInitDataUtil").isFromCatalogCollectionFlow,j=b("AdsCanvasEditorEnums").SaveStateEnum,k="leadgen_auto_creation_form_universe",l="leadgen_ix_tab_design_create_flow_universe",m="test",n="control",o=b("AdsCanvasInlineBuilderMarkRedirectToAdSetProvider").toFluxStore();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=!d.state.showInlineModal||d.state.documentEditState===j.SAVED||d.state.isPublished,c=d.state.isReady&&(d.state.templateID===b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID||d.state.canHandleLeadFormInInlineTemplate);return!c&&a?!0:d.$5()},d.$6=function(){b("AdsCanvasInlineBuilderActions").setShowInlineModal(!1),d.$7()},d.$2=function(a,c){(d.state.showRecommendedTab||d.state.showAutoCreationForm)&&b("AdsUEditorAdgroupSetHasCanvasLinkDataAction").dispatch({hostID:d.context.adgroupEditorContext.hostID,adgroupIDs:d.state.adgroupIDs,isChecked:!1},{line:"354",module:"AdsCanvasInlineBuilderDialogContainer.react.js"}),d.state.isReady&&(b("AdsUEditorAdgroupSetCanvasDocumentDataAction").dispatch({canvasAdSettings:c,canvasID:a,hostID:d.context.adgroupEditorContext.hostID,adgroupIDs:d.state.adgroupIDs,shouldSetCollectionFields:!0},{line:"361",module:"AdsCanvasInlineBuilderDialogContainer.react.js"}),i()&&!d.state.hasUserBeenRedirected&&(b("AdsCFNavigationWizardSectionNavigateDataAction").dispatch({eventName:"wizard_section_navigate",pageID:b("AdObjectLevels").CAMPAIGN,sectionID:"CAMPAIGN_AUCTION_PROMOTED_OBJECT_SECTION",source:b("AdsCFNavigationWizardConstants").NAV_SOURCE.NAV_BAR},{line:"370",module:"AdsCanvasInlineBuilderDialogContainer.react.js"}),b("AdsCanvasInlineBuilderMarkRedirectToAdSetAction").dispatch({},{line:"378",module:"AdsCanvasInlineBuilderDialogContainer.react.js"})),d.$7())},d.$3=function(a){d.state.isReady||g(0,1580);var c=d.state,e=c.canvasID;c=c.templateID;b("AdsCanvasInlineBuilderActions").setShowInlineModal(a,e,c)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a,c){a=c.adgroupEditorContext;return[].concat(b("adsUEditorAdgroupCanvasBuilderSelector").getStores(a),b("adsUEditorAdgroupCanvasInlineTemplateSelector").getStores(a),b("adsCanvasIsCurrentDocumentPublishedSelector").getStores(),[b("RichMediaEditorStore")],b("adsCanvasInlineEditorCanHandleLeadFormSelector").getStores(a),b("adsUEditorAdObjectsForSelectedAdgroupsSelector").getStores(a),b("adsUEditorAdgroupCanvasSectionRedesignQESelector").getStores(a),b("adsUEditorAdgroupLeadGenAutoCreationQESelector").getStores(a),[o])};c.calculateState=function(a,c,d){__p&&__p();a=d.adgroupEditorContext;c=b("adsUEditorAdgroupCanvasBuilderSelector")(a);if(!c.isReady)return{isReady:!1};d=b("adsUEditorAdgroupCanvasInlineTemplateSelector")(a);if(!d.isReady)return{isReady:!1};var e=c.canvasID;d=d.templates&&d.templates.some(function(a){return a.get("document").id===e});var f=b("adsCanvasInlineEditorCanHandleLeadFormSelector")(a),g=null;if(f||c.templateID===b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID){var h=b("adsUEditorAdObjectsForSelectedAdgroupsSelector")(a);if(h.length==1){h=h[0];g=b("AdsUEditorCampaignGroupAdObjectsUtils").getObjective(h)}}h=o.getState().hasBeenRedirected;var i=b("adsUEditorAdgroupCanvasSectionRedesignQESelector")(a);a=b("adsUEditorAdgroupLeadGenAutoCreationQESelector")(a);return{adAccount:c.adAccount,adgroupIDs:c.adgroupIDs,adMediaFormatType:c.adMediaFormatType,adObjective:g,businessID:c.businessID,canHandleLeadFormInInlineTemplate:f,canvasCapabilityConfig:c.canvasCapabilityConfig,canvasID:e,createFromTemplate:d,defaultURL:c.defaultURL,documentEditState:b("RichMediaEditorStore").getDocumentEditState(),hasUserBeenRedirected:h,inlineTab:c.inlineTab,isInAutoCreationFormExp:a.isInAutoCreationExp,isInRecommendedTabExp:i.isInRecommendedTabExp,isPublished:b("adsCanvasIsCurrentDocumentPublishedSelector")(),isReady:c.isReady,pageID:c.pageID,pageName:c.pageName,pagePictureUrl:c.pagePictureUrl,productCatalogID:c.productCatalogID,productSetID:c.productSetID,showInlineModal:c.showInlineModal,showAutoCreationForm:a.showAutoCreationForm,showRecommendedTab:i.showRecommendedTab,supportFacebookEnabled:c.supportFacebookEnabled,supportInstagramEnabled:c.supportInstagramEnabled,templateID:c.templateID}};var d=c.prototype;d.render=function(){if(!this.state.isReady)return b("React").createElement(b("FDSSpinner.react"),null);var a=this.state,c=a.businessID,d=a.canvasCapabilityConfig,e=a.canvasID,f=a.createFromTemplate,g=a.defaultURL,h=a.pageID,i=a.pageName,j=a.pagePictureUrl,k=a.productCatalogID,l=a.productSetID,m=a.showInlineModal,n=a.supportFacebookEnabled,o=a.supportInstagramEnabled;a=a.templateID;var p=this.context.adgroupEditorContext.hostID===b("AdsUEditorHostIDs").CREATION?b("CanvasSource").CREATE_FLOW:b("CanvasSource").POWER_EDITOR;return b("React").createElement("div",null,b("React").createElement(b("AdsCanvasInlineBuilderDialog.react"),{accessToken:b("WebApiApplication").getAccessToken(),businessID:c,canvasCapabilityConfig:d,canvasID:e,canvasSource:p,createFromTemplate:f,defaultURL:g,isShown:m,pageID:h,pageName:i,pagePictureUrl:j,productCatalogID:k,productSetID:l,supportFacebookEnabled:n,supportInstagramEnabled:o,templateID:a,onBeforeHide:this.$1,onDoneSuccess:this.$2,onToggle:this.$3}))};d.componentDidMount=function(){this.$4(),b("AdsCanvasInlineBuilderHandleLoadingModalDataAction").dispatch({isShown:!1},{line:"291",module:"AdsCanvasInlineBuilderDialogContainer.react.js"})};d.componentDidUpdate=function(a,b){this.state.isReady&&(!b.isReady||b.showInlineModal!==this.state.showInlineModal||this.state.canHandleLeadFormInInlineTemplate&&b.canHandleLeadFormInInlineTemplate!==this.state.canHandleLeadFormInInlineTemplate)&&this.$4()};d.$5=function(){b("ReactDOM").render(b("React").createElement(b("AdsCanvasCloseUnsavedCanvasDialogContainer.react"),{onCancel:b("emptyFunction"),onConfirm:this.$6}),b("DOM").create("div"));b("AdsCanvasShowCloseUnsavedCanvasDialogDataAction").dispatch({showDialog:!0},{line:"335",module:"AdsCanvasInlineBuilderDialogContainer.react.js"});return!1};d.$4=function(){__p&&__p();if(!this.state.isReady||!this.state.pageID||!this.state.showInlineModal||this.state.templateID!==b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID&&!this.state.canHandleLeadFormInInlineTemplate)return;var a=this.state.inlineTab;b("AdsLeadGenFormEditorFunnelLogger").initAndStartFunnel(this.state.adAccount,this.state.adMediaFormatType,b("AdsLeadGenFormCreationSource").CANVAS_EDITOR,{capabilities:b("immutable").Set(),id:this.state.pageID,name:this.state.pageName,pictureURL:this.state.pagePictureUrl},null,null,!1);this.state.templateID&&b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.CANVAS_TEMPLATE_ID+this.state.templateID);this.state.adObjective&&b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.AD_OBJECTIVE+this.state.adObjective.toLowerCase());if(this.state.isInAutoCreationFormExp){b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.QE_NAME+k);var c=this.state.showAutoCreationForm?m:n;b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.QE_GROUP+c)}else if(this.state.isInRecommendedTabExp){b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.QE_NAME+l);c=this.state.showRecommendedTab?m:n;b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.QE_GROUP+c)}c=this.context.adgroupEditorContext.hostID;b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.HOST_ID+c);c===b("AdsUEditorHostIDs").CREATION&&b("AdsLeadGenFormEditorFunnelLogger").addFunnelTag(h.TAB_SURFACE+a);b("AdsLeadGenFormEditorFunnelLoggingStore")};d.$7=function(){this.state.isReady&&this.state.pageID!=null&&(this.state.templateID===b("AdsLeadGenConstants").CANVAS_TEMPLATE_FOR_USE_FORM_ID||this.state.canHandleLeadFormInInlineTemplate)&&b("AdsLeadGenFormEditorFunnelLogger").endFunnel()};return c}(b("React").PureComponent);a.contextTypes=b("AdsUEditorContextType").adgroup;e.exports=b("AdsFluxContainer").create(a,{withContext:!0,name:e.id})}),null);