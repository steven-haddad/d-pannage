if (self.CavalryLogger) { CavalryLogger.start_js(["W0nR2"]); }

__d("AdsDraftDraftFragmentBatchValidateCompletedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.BATCH_VALIDATE_COMPLETED");e.exports=a}),null);
__d("AdsDraftDraftFragmentBatchValidateCompletedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.BATCH_VALIDATE_COMPLETED"}}),null);
__d("AdsDraftDraftFragmentBatchValidateErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.BATCH_VALIDATE_ERROR");e.exports=a}),null);
__d("AdsDraftDraftFragmentBatchValidateErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.BATCH_VALIDATE_ERROR"}}),null);
__d("AdsDraftDraftFragmentHasErrorsListLoadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.HAS_ERRORS.LIST.LOAD_ERROR");e.exports=a}),null);
__d("AdsDraftDraftFragmentHasErrorsListLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.HAS_ERRORS.LIST.LOADED");e.exports=a}),null);
__d("AdsDraftDraftFragmentNeedsValidationListLoadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.LOAD_ERROR");e.exports=a}),null);
__d("AdsDraftDraftFragmentNeedsValidationListLoadErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.LOAD_ERROR"}}),null);
__d("AdsDraftDraftFragmentNeedsValidationListLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.LOADED");e.exports=a}),null);
__d("AdsDraftDraftFragmentNeedsValidationListLoadedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.LOADED"}}),null);
__d("AdsDraftDraftFragmentNeedsValidationListPartialLoadDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.PARTIAL_LOAD");e.exports=a}),null);
__d("AdsDraftDraftFragmentNeedsValidationListPartialLoadDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.NEEDS_VALIDATION.LIST.PARTIAL_LOAD"}}),null);
__d("AdsDraftDraftFragmentValidateDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.VALIDATE");e.exports=a}),null);
__d("AdsDraftDraftFragmentValidateDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.VALIDATE"}}),null);
__d("AdsDraftDraftFragmentValidateErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.VALIDATE.ERROR");e.exports=a}),null);
__d("AdsDraftDraftFragmentValidateErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.DRAFT_FRAGMENT.VALIDATE.ERROR"}}),null);
__d("AdsDraftDraftFragmentValidatedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsDraft.DRAFT_FRAGMENT.VALIDATED");e.exports=a}),null);
__d("AdsDraftStopPublishStoppedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsDraft.STOP_PUBLISH.STOPPED"}}),null);
__d("AdsDraftFragmentValidateDataManager",["AdsAbstractDataManager","AdsDraftDraftFragmentValidatedDataAction","AdsDraftDraftFragmentValidateErrorDataAction","AdsGraphAPI","GraphAPIRetry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.forceValidationFor=function(a){var c=this;return b("GraphAPIRetry").idempotentPostWithCustomRetries_BET_MY_JOB_ON_IT(b("AdsGraphAPI").get(e.id).object("addraft_fragment",a.id).edge("validate").batched(),{},g).then(function(b){c.__handleSuccess(["update"],a.id,null,babelHelpers["extends"]({},a,b))},function(){c.__handleError(["update"],a.id,null,a)})};d.__onBatchUpdated=function(a){b("AdsDraftDraftFragmentValidatedDataAction").dispatch({fragments:a},{line:"49",module:"AdsDraftFragmentValidateDataManager.js"})};d.__onBatchUpdateError=function(a){b("AdsDraftDraftFragmentValidateErrorDataAction").dispatch({fragments:a},{line:"55",module:"AdsDraftFragmentValidateDataManager.js"})};return c}(b("AdsAbstractDataManager"));e.exports=new a()}),null);
__d("AdsPEDraftFragmentFilteredListDataManager",["AdDraftFragmentValidationStatus","AdsAPIAdDraftFields","AdsAPIAdDraftFragmentFields","AdsApplicationIDs","AdsDraftDraftFragmentBatchUpdatedDataAction","AdsDraftDraftFragmentHasErrorsListLoadedDataAction","AdsDraftDraftFragmentHasErrorsListLoadErrorDataAction","AdsDraftDraftFragmentNeedsValidationListLoadedDataAction","AdsDraftDraftFragmentNeedsValidationListLoadErrorDataAction","AdsDraftDraftFragmentNeedsValidationListPartialLoadDataAction","AdsDraftFragmentDataManagerFields","AdsGraphAPI","GraphAPIPaging","GraphAPIRetry","PowerEditorConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PowerEditorConfig").config.PEZ||{};function h(){b("AdsDraftDraftFragmentNeedsValidationListLoadedDataAction").dispatch({},{line:"34",module:"AdsPEDraftFragmentFilteredListDataManager.js"})}function i(){b("AdsDraftDraftFragmentNeedsValidationListLoadErrorDataAction").dispatch({},{line:"38",module:"AdsPEDraftFragmentFilteredListDataManager.js"})}function j(){b("AdsDraftDraftFragmentHasErrorsListLoadedDataAction").dispatch({},{line:"42",module:"AdsPEDraftFragmentFilteredListDataManager.js"})}function k(){b("AdsDraftDraftFragmentHasErrorsListLoadErrorDataAction").dispatch({},{line:"46",module:"AdsPEDraftFragmentFilteredListDataManager.js"})}a=function(){__p&&__p();function a(){var a=this;this.FETCH_LIMIT=g.FRAG_LIST_FETCH_LIMIT||200;this.PAGE_SIZE=g.FRAG_LIST_FETCH_PAGE_SIZE||20;this.RETRY_COUNT=g.FRAG_LIST_FETCH_RETRY_COUNT||3;this.FIELDS=b("AdsDraftFragmentDataManagerFields").fields.join(",");this.$2=function(c,d){var e=d.data;a.$3(c,d);b("AdsDraftDraftFragmentNeedsValidationListPartialLoadDataAction").dispatch({fragments:e},{line:"83",module:"AdsPEDraftFragmentFilteredListDataManager.js"})}}var c=a.prototype;c.loadPendingValidationFor=function(a){return this.$1(a,this.FIELDS,b("AdDraftFragmentValidationStatus").NEEDS_VALIDATION,this.$2,h,i)};c.loadHasErrorsFor=function(a){return this.$1(a,this.FIELDS,b("AdDraftFragmentValidationStatus").HAS_ERRORS,this.$3,j,k)};c.$3=function(a,c){a=c.data;var d=new Map();a.forEach(function(a){return d.set(a.id,a)});b("AdsDraftDraftFragmentBatchUpdatedDataAction").dispatch({fragments:d,adsApplicationID:b("AdsApplicationIDs").ADS_POWER_EDITOR},{line:"95",module:"AdsPEDraftFragmentFilteredListDataManager.js"})};c.$1=function(a,c,d,f,g,h){return b("GraphAPIRetry").getPageWithRetries(b("AdsGraphAPI").get(e.id).object("addraft",a).edge(b("AdsAPIAdDraftFields").ADDRAFT_FRAGMENTS),{fields:c,filtering:[{field:b("AdsAPIAdDraftFragmentFields").VALIDATION_STATUS,operator:"IN",value:[d]}],limit:this.PAGE_SIZE},this.RETRY_COUNT).then(b("GraphAPIPaging").eachPage(function(b){return f(a,b)},this.FETCH_LIMIT)).then(function(a){return g()},function(a){return h()})};return a}();c=new a();e.exports=c}),null);
__d("AdsPEDraftFragmentValidationQueueStore",["Promise","AdDraftFragmentValidationStatus","AdsAccountStore","AdsDataAtom","AdsDraftDraftFragmentBatchCreatedDataActionFlux","AdsDraftDraftFragmentBatchLoadedDataActionFlux","AdsDraftDraftFragmentBatchUpdatedDataActionFlux","AdsDraftDraftFragmentBatchValidateCompletedDataAction","AdsDraftDraftFragmentBatchValidateCompletedDataActionFlux","AdsDraftDraftFragmentBatchValidateErrorDataAction","AdsDraftDraftFragmentBatchValidateErrorDataActionFlux","AdsDraftDraftFragmentListPartialLoadDataActionFlux","AdsDraftDraftFragmentNeedsValidationListLoadedDataActionFlux","AdsDraftDraftFragmentNeedsValidationListLoadErrorDataActionFlux","AdsDraftDraftFragmentNeedsValidationListPartialLoadDataActionFlux","AdsDraftDraftFragmentValidateDataAction","AdsDraftDraftFragmentValidateDataActionFlux","AdsDraftDraftFragmentValidatedDataActionFlux","AdsDraftDraftFragmentValidateErrorDataActionFlux","AdsDraftDraftPublishCompletedDataActionFlux","AdsDraftDraftPublishDataActionFlux","AdsDraftDraftPublishFailedErrorDataActionFlux","AdsDraftFragmentValidateDataManager","AdsDraftSelectionStore","AdsDraftStopPublishStoppedDataActionFlux","AdsDraftUtils","AdsObjectLevelToFragmentStore","AdsPEDraftFragmentFilteredListDataManager","AdsPENavigationStore","AdsPENavSectionToSelectionSelectorMap","AdsPENavSectionToVisibleIDsSelectorMap","FluxReduceStore","PowerEditorConfig","createObjectBy","debounce","getByPath","gkx","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=b("immutable").Map(),i=b("immutable").Set(),j=b("getByPath")(b("PowerEditorConfig"),["config","PEZ"])||{};function k(){var a=b("AdsPENavigationStore").getManageAdsSection();a=b("AdsPENavSectionToSelectionSelectorMap").selectedIDsSelector(a);return a&&a.length?a:g}function l(){var a=b("AdsPENavigationStore").getManageAdsSection();a=a?b("AdsPENavSectionToVisibleIDsSelectorMap").get(a):null;return a?a():g}function m(a,b,c){__p&&__p();if(c<=0)return[];var d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(b(g)){d.push(g);if(d.length>=c)break}}return d}var n=b("gkx")("779516"),o=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({currentlyPublishingFragments:i,failedFragments:h,fragmentsToValidate:h,isFetchingNeedsValidation:!1,isValidating:!1}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.BATCH_SIZE=j.VALIDATION_QUEUE_BATCH_SIZE||20,d.DEBOUNCE_MS=j.VALIDATION_QUEUE_DEBOUNCE_MS||500,d.STATE=o,d.scheduleValidate=b("debounce")(function(){return b("AdsDraftDraftFragmentValidateDataAction").dispatch({},{line:"121",module:"AdsPEDraftFragmentValidationQueueStore.js"})},d.DEBOUNCE_MS),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialState=function(){return new o()};d.__getActionTypes=function(){return n?[b("AdsDraftDraftFragmentBatchCreatedDataActionFlux").actionType,b("AdsDraftDraftFragmentBatchLoadedDataActionFlux").actionType,b("AdsDraftDraftFragmentBatchUpdatedDataActionFlux").actionType,b("AdsDraftDraftFragmentBatchValidateCompletedDataActionFlux").actionType,b("AdsDraftDraftFragmentBatchValidateErrorDataActionFlux").actionType,b("AdsDraftDraftFragmentListPartialLoadDataActionFlux").actionType,b("AdsDraftDraftFragmentNeedsValidationListLoadErrorDataActionFlux").actionType,b("AdsDraftDraftFragmentNeedsValidationListLoadedDataActionFlux").actionType,b("AdsDraftDraftFragmentNeedsValidationListPartialLoadDataActionFlux").actionType,b("AdsDraftDraftFragmentValidateDataActionFlux").actionType,b("AdsDraftDraftFragmentValidatedDataActionFlux").actionType,b("AdsDraftDraftFragmentValidateErrorDataActionFlux").actionType,b("AdsDraftDraftPublishCompletedDataActionFlux").actionType,b("AdsDraftDraftPublishDataActionFlux").actionType,b("AdsDraftDraftPublishFailedErrorDataActionFlux").actionType,b("AdsDraftStopPublishStoppedDataActionFlux").actionType]:null};d.reduce=function(a,c){__p&&__p();var d=c.action;if(!b("gkx")("829575"))return a;if(!b("AdsDraftUtils").isApplicationIDPowerEditor(d.adsApplicationID))return a;switch(d.type){case b("AdsDraftDraftPublishDataActionFlux").actionType:return d.fragmentIDs!=null?a.set("currentlyPublishingFragments",d.fragmentIDs):a;case b("AdsDraftDraftPublishCompletedDataActionFlux").actionType:b("AdsPEDraftFragmentFilteredListDataManager").loadHasErrorsFor(d.draftID);return a.set("currentlyPublishingFragments",i);case b("AdsDraftDraftPublishFailedErrorDataActionFlux").actionType:case b("AdsDraftStopPublishStoppedDataActionFlux").actionType:return a.set("currentlyPublishingFragments",i);case b("AdsDraftDraftFragmentNeedsValidationListLoadedDataActionFlux").actionType:case b("AdsDraftDraftFragmentNeedsValidationListLoadErrorDataActionFlux").actionType:return a.set("isFetchingNeedsValidation",!1);case b("AdsDraftDraftFragmentBatchLoadedDataActionFlux").actionType:case b("AdsDraftDraftFragmentBatchCreatedDataActionFlux").actionType:case b("AdsDraftDraftFragmentBatchUpdatedDataActionFlux").actionType:case b("AdsDraftDraftFragmentListPartialLoadDataActionFlux").actionType:if(!a.isFetchingNeedsValidation){c=b("AdsAccountStore").getSelectedAccountIDX();c=b("AdsDraftSelectionStore").getCached(c).value;c&&b("AdsPEDraftFragmentFilteredListDataManager").loadPendingValidationFor(c)}var e={},f=new Set();d.fragments.forEach(function(c){c.validation_status===b("AdDraftFragmentValidationStatus").NEEDS_VALIDATION&&(e[c.ad_object_id]=c);if(d.type!==b("AdsDraftDraftFragmentBatchCreatedDataActionFlux").actionType){var g=a.failedFragments.get(c.id);g!=null&&c.time_updated>g&&f.add(c.id)}});b("AdsDataAtom").addPostDispatchCallback(function(){return b("AdsDraftDraftFragmentValidateDataAction").dispatch({},{line:"239",module:"AdsPEDraftFragmentValidationQueueStore.js"})});return a.merge({failedFragments:a.failedFragments.filter(function(a,b){return!f.has(b)}),fragmentsToValidate:a.fragmentsToValidate.merge(b("immutable").Iterable(e)),isFetchingNeedsValidation:!0});case b("AdsDraftDraftFragmentNeedsValidationListPartialLoadDataActionFlux").actionType:b("AdsDataAtom").addPostDispatchCallback(function(){return b("AdsDraftDraftFragmentValidateDataAction").dispatch({},{line:"253",module:"AdsPEDraftFragmentValidationQueueStore.js"})});return a.set("fragmentsToValidate",a.fragmentsToValidate.merge(b("immutable").Iterable(b("createObjectBy")(d.fragments,function(a){return a.ad_object_id}))));case b("AdsDraftDraftFragmentBatchValidateCompletedDataActionFlux").actionType:case b("AdsDraftDraftFragmentBatchValidateErrorDataActionFlux").actionType:this.scheduleValidate();return a.set("isValidating",!1);case b("AdsDraftDraftFragmentValidateDataActionFlux").actionType:return this.validateReducer(a);case b("AdsDraftDraftFragmentValidatedDataActionFlux").actionType:var g=new Set(d.fragments.keys());return a.set("failedFragments",a.failedFragments.filter(function(a,b){return!g.has(b)}));case b("AdsDraftDraftFragmentValidateErrorDataActionFlux").actionType:var h={};d.fragments.forEach(function(a){h[a.id]=a.time_updated});return a.set("failedFragments",a.failedFragments.merge(h))}return a};d.getFragmentsToValidate=function(){return this.getState().fragmentsToValidate};d.validateOne=function(a){var c=b("AdsObjectLevelToFragmentStore").get(a.ad_object_type),d=c.isDirty(a.ad_object_id);c=c.getRaw(a.ad_object_id);c=c.validationStatus===b("AdDraftFragmentValidationStatus").NEEDS_VALIDATION;return!d&&c?b("AdsDraftFragmentValidateDataManager").forceValidationFor(a):b("Promise").resolve()};d.getTopFragmentsToValidate=function(a,b){__p&&__p();var c=h,d=[k(),l(),a.fragmentsToValidate.keys()],e=function(){var e=d[f],g=m(e,function(b){var d=a.fragmentsToValidate.get(b);return d&&!c.has(b)&&!a.fragmentsToValidate.has(d.parent_ad_object_id)&&!a.currentlyPublishingFragments.has(d.id)&&!a.failedFragments.has(d.id)},b-c.size);c=c.withMutations(function(b){return g.forEach(function(c){return b.set(c,a.fragmentsToValidate.get(c))})})};for(var f=0;f<d.length;f++)e();return c};d.validateReducer=function(a){__p&&__p();var c=this;if(a.fragmentsToValidate.size===0||a.isValidating)return a;var d=this.getTopFragmentsToValidate(a,this.BATCH_SIZE);b("promiseDone")(b("Promise").all(d.map(function(a){return c.validateOne(a)}).toArray()),function(){return b("AdsDraftDraftFragmentBatchValidateCompletedDataAction").dispatch({},{line:"370",module:"AdsPEDraftFragmentValidationQueueStore.js"})},function(){return b("AdsDraftDraftFragmentBatchValidateErrorDataAction").dispatch({},{line:"371",module:"AdsPEDraftFragmentValidationQueueStore.js"})});return a.merge({fragmentsToValidate:a.fragmentsToValidate.filter(function(a){return!d.has(a.ad_object_id)}),isValidating:!0})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("warningImpl",["requireCond","cr:862887","Bootloader","createWarning","monitorCodeUse"],(function(a,b,c,d,e,f){__p&&__p();(function(){});if(b("cr:862887"))a=b("createWarning")(b("monitorCodeUse"),function(a){b("cr:862887").showReactFailure(a)});else{c=function(a){};var g=[],h=function(a,b){__p&&__p();var c=a.createClass({displayName:"Warnings",UNSAFE_componentWillMount:function(){var a=this;d=function(){window.setTimeout(function(){return a.forceUpdate()},0)}},componentWillUnmount:function(){d=i},render:function(){return a.createElement("ul",{style:{whiteSpace:"pre-wrap"}},g.map(function(b,c){return a.createElement("li",{key:c},b)}))}});window.setTimeout(function(){b.show("React Failures *MUST FIX*",null,a.createElement(c,null))},0)},i=function(){d=function(){},b("Bootloader").loadModules(["React","ExceptionDialog"],h,"warningImpl")};d=i;a=b("createWarning")(b("monitorCodeUse"),c)}e.exports=a}),null);