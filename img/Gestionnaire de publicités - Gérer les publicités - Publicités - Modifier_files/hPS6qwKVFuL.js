if (self.CavalryLogger) { CavalryLogger.start_js(["n08cp"]); }

__d("AdsMessengerPageWelcomeMessageListDataProvider",["Laminar","AdsMessengerPageWelcomeMessageListDataProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsMessengerPageWelcomeMessageListDataProviderPlugin"),"AdsMessengerPageWelcomeMessageListDataProviderPlugin")}),null);
__d("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.merge(b.pageWelcomeMessageList)}};e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadedAction",["Laminar","AdsMessengerPageWelcomeMessageListLoadedReducerPlugin","AdsMessengerPageWelcomeMessageListDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadedReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADED");e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin",["mapSet"],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,c){return a.merge(b("mapSet")(c.pageIDs,function(b){return[b,a.get(b).loading()]}))}};e.exports=a}),null);
__d("AdsMessengerPageWelcomeMessageListLoadingAction",["Laminar","AdsMessengerPageWelcomeMessageListLoadingReducerPlugin","AdsMessengerPageWelcomeMessageListDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsMessengerPageWelcomeMessageListLoadingReducerPlugin"),b("AdsMessengerPageWelcomeMessageListDataProvider"),{})]},function(){return[]},"ADS_MESSENGER_PAGE_WELCOME_MESSAGE_LIST.LOADING");e.exports=a}),null);
__d("AdsMessengerVisualEditorLoggerEvents",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CTM_VISUAL_EDITOR_RENDER:"ctm_visual_editor_render",CTM_EDIT_PAGE_WELCOME_MESSAGE:"ctm_edit_page_welcome_message",CTM_STANDARD_EDITING_DIALOG_OPEN:"ctm_standard_editing_dialog_open",CTM_CUSTOM_EDITING_DIALOG_OPEN:"ctm_custom_editing_dialog_open",CTM_CREATE_CUSTOM_TEMPLATE_SUCCESS:"create_custom_template_success",CTM_DUPLICATE_CUSTOM_TEMPLATE:"ctm_duplicate_custom_template",CTM_DUPLICATE_CTM_LEAD_GEN:"ctm_duplicate_ctm_lead_gen",CTM_CHANGE_STANDARD_TEMPLATE:"ctm_change_standard_template",CTM_CREATE_CUSTOM_TEMPLATE_FAIL:"create_custom_template_fail",CTM_PREVIEW_MESSAGE_SUCCESS:"ctm_preview_message_success",CTM_PREVIEW_MESSAGE_FAILED:"ctm_preview_message_failed",CTM_CHANGE_STANDARD_TEMPLATE_ICEBREAKER:"ctm_change_standard_template_icebreaker",CTM_SELECT_CUSTOM_WELCOME_MESSAGE:"ctm_select_custom_welcome_message",CTM_SELECT_LEAD_GEN:"ctm_select_lead_gen",CTM_SELECT_FOLLOW_UP:"ctm_select_follow_up",CTM_CANCEL_LEAD_GEN_DIALOG:"ctm_cancel_lead_gen_dialog",CTM_LEAD_GEN_EMPTY_PRIVACY_LINK:"ctm_lead_gen_empty_privacy_link",CTM_LEAD_GEN_INVALID_PRIVACY_LINK:"ctm_lead_gen_invalid_privacy_link"});e.exports=a}),null);
__d("AdsUEditorAdgroupSetPageWelcomeMessageDataAction",["Laminar","ifRequired"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("ifRequired")("AdsAdgroupDraftFragmentsSetPageWelcomeMessageDataReducerPlugin",function(a){return b("ifRequired")("AdsAdgroupDraftFragmentsDataProvider",function(c){return b("Laminar").__createReducer(a,c,{})})}),b("ifRequired")("AdsUEditorAdgroupSetPageWelcomeMessageReducerPlugin",function(a){return b("ifRequired")("AdsCFAdgroupDataProvider",function(c){return b("Laminar").__createReducer(a,c,{})})})]},function(){return[]},"ADS_ADGROUP_EDITOR_SET_PAGE_WELCOME_MESSAGE");e.exports=a}),null);
__d("XMessengerVisualEditorPageWelcomeMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/page_welcome_message/",{page_id:{type:"FBID",required:!0},page_welcome_message:{type:"String",required:!0},template_name:{type:"String",required:!0},is_edit:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessengerVisualEditorPageWelcomeMessageDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/messenger_monetization/delete_page_welcome_message/",{template_id:{type:"FBID",required:!0}})}),null);
__d("AdsMessengerPageWelcomeMessageDataManager",["AdsGraphAPI","AdsInterfacesLogger","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","AdsMessengerVisualEditorLoggerEvents","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AsyncRequest","XMessengerVisualEditorPageWelcomeMessageController","XMessengerVisualEditorPageWelcomeMessageDeleteController","emptyFunction","promiseDone","promiseLoadObjects"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["id","template_name","page_welcome_message_body","time_created"];a=function(){__p&&__p();function a(){}var c=a.prototype;c.getPageWelcomeMessageList=function(a){return b("AdsGraphAPI").get(e.id).object("page",a).edge("messenger_ads_page_welcome_messages").get({fields:g})};c.createCustomTemplate=function(a,c,d,e,f,g,h){var i=this;g===void 0&&(g=!1);h===void 0&&(h=b("emptyFunction"));d=b("XMessengerVisualEditorPageWelcomeMessageController").getURIBuilder().setFBID("page_id",c).setString("page_welcome_message",d).setString("template_name",e).setBool("is_edit",g).getURI();new(b("AsyncRequest"))().setURI(d).setErrorHandler(function(a){b("AdsInterfacesLogger").log({eventName:b("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_CUSTOM_TEMPLATE_FAIL})}).setHandler(function(d){b("AdsInterfacesLogger").log({eventName:b("AdsMessengerVisualEditorLoggerEvents").CTM_CREATE_CUSTOM_TEMPLATE_SUCCESS,data:{facebook_page_id:c}}),i.fetchAllPageWelcomeMessageList(new Set([c])),b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:f,adgroupIDs:a,pageWelcomeMessage:JSON.stringify(JSON.parse(d.payload.page_welcome_message))},{line:"80",module:"AdsMessengerPageWelcomeMessageDataManager.js"}),h()}).send()};c.deleteExistingTemplate=function(a,c){var d=this;c=b("XMessengerVisualEditorPageWelcomeMessageDeleteController").getURIBuilder().setFBID("template_id",c).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(b){d.fetchAllPageWelcomeMessageList(new Set([a]))}).send()};c.fetchAllPageWelcomeMessageList=function(a){var c=this;b("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"105",module:"AdsMessengerPageWelcomeMessageDataManager.js"});var d=new Map();a.forEach(function(a){return d.set(a,c.getPageWelcomeMessageList(a))});b("promiseDone")(b("promiseLoadObjects")(d),function(a){b("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"111",module:"AdsMessengerPageWelcomeMessageDataManager.js"})})};return a}();e.exports=new a()}),null);
__d("AdsMessengerPageWelcomeMessageListDataProviderPlugin",["AdsMessengerPageWelcomeMessageDataManager","AdsMessengerPageWelcomeMessageListLoadedAction","AdsMessengerPageWelcomeMessageListLoadingAction","LoadObjectMap","promiseDone","promiseLoadObjectsFromKeys"],(function(a,b,c,d,e,f){"use strict";a={initialState:b("LoadObjectMap").create(function(a){b("AdsMessengerPageWelcomeMessageListLoadingAction").dispatch({pageIDs:a},{line:"29",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"}),b("promiseDone")(b("promiseLoadObjectsFromKeys")(a,b("AdsMessengerPageWelcomeMessageDataManager").getPageWelcomeMessageList),function(a){b("AdsMessengerPageWelcomeMessageListLoadedAction").dispatch({pageWelcomeMessageList:a},{line:"36",module:"AdsMessengerPageWelcomeMessageListDataProviderPlugin.js"})})})};e.exports=a}),null);
__d("AdsMessengerVideoPreviewFetchErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_PREVIEW_FETCH_ERROR");e.exports=a}),null);
__d("AdsMessengerVideoPreviewFetchSuccessDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_PREVIEW_FETCH_SUCCESS");e.exports=a}),null);
__d("AdsMessengerVideoUploadErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_UPLOAD_ERROR");e.exports=a}),null);
__d("AdsMessengerVideoUploadResetDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"MESSENGER.VIDEO_UPLOAD_RESET"}}),null);
__d("AdsMessengerVideoUploadSuccessDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"MESSENGER.VIDEO_UPLOAD_SUCCESS");e.exports=a}),null);
__d("XMessengerVideoPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/ads/video/fetch/",{video_key:{type:"String",required:!0}})}),null);
__d("AdsMessengerVideoPreviewDataManager",["AdsMessengerVideoPreviewFetchErrorDataAction","AdsMessengerVideoPreviewFetchSuccessDataAction","AsyncRequest","XMessengerVideoPreviewController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var c=a.prototype;c.getVideoPreview=function(a){var c=b("XMessengerVideoPreviewController").getURIBuilder().setString("video_key",a).getURI();c=new(b("AsyncRequest"))().setURI(c).setAllowCrossOrigin(!0).setErrorHandler(function(c){b("AdsMessengerVideoPreviewFetchErrorDataAction").dispatch({data:{key:a,error:c}},{line:"26",module:"AdsMessengerVideoPreviewDataManager.js"})}).setHandler(function(c){b("AdsMessengerVideoPreviewFetchSuccessDataAction").dispatch({data:{key:a,url:c.payload.url}},{line:"31",module:"AdsMessengerVideoPreviewDataManager.js"})});c.send()};return a}();e.exports=new a()}),null);
__d("XMessengerVisualEditorVideoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/ads/visual_editor/video/",{})}),null);
__d("AdsMessengerVideoUploader",["AdsMessengerVideoUploadErrorDataAction","AdsMessengerVideoUploadSuccessDataAction","AsyncRequest","XMessengerVisualEditorVideoUploadController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.uploadVideoWithVideoIDMap=function(a,b,c){__p&&__p();var d=this,e=new FileReader();e.readAsDataURL(a);e.onloadend=function(){var a=new FormData(),f=e.result&&e.result.split(",");f=f&&f[1];a.append("video_string",f);a.append("async_response","true");a.append("page_id",b);a.append("videox_id",c);d.$1(a)}};c.$1=function(a){var c=b("XMessengerVisualEditorVideoUploadController").getURIBuilder().getURI();c=new(b("AsyncRequest"))().setURI(c).setRawData(a).setStatusElement(null).setAllowCrossOrigin(!0).setErrorHandler(function(a){return b("AdsMessengerVideoUploadErrorDataAction").dispatch({error:a},{line:"47",module:"AdsMessengerVideoUploader.js"})}).setHandler(function(a){b("AdsMessengerVideoUploadSuccessDataAction").dispatch({videoID:a.payload.video_fbid},{line:"53",module:"AdsMessengerVideoUploader.js"})});c.send()};return a}();e.exports=new a()}),null);
__d("AdsMessengerVideoUploadDataManager",["AdsAccountStore","AdsMessengerVideoUploader","AdsMessengerVideoUploadErrorDataAction","AdsVideoUploader","AdsVideoUploadEvents","VideoUploadFile","WebApiApplication"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="visual_editor";a=function(){__p&&__p();function a(){}var c=a.prototype;c.uploadVideo=function(a,c){c=this.getVideoUploader(a,c);a=b("VideoUploadFile").fromFile(a);c.uploadMessengerVideo(a)};c.$1=function(a,c){a=c&&JSON.stringify(c);b("AdsMessengerVideoUploadErrorDataAction").dispatch({error:new Error(a)},{line:"31",module:"AdsMessengerVideoUploadDataManager.js"})};c.getVideoUploader=function(a,c){var d=new(b("AdsVideoUploader"))(b("AdsAccountStore").getSelectedAccountIDX(),b("WebApiApplication").getAccessToken(),g);d.subscribe(b("AdsVideoUploadEvents").UPLOAD_ERROR,this.$1.bind(this));d.subscribe(b("AdsVideoUploadEvents").UPLOAD_SUCCESS,function(a,c){return function(d,e){b("AdsMessengerVideoUploader").uploadVideoWithVideoIDMap(a,c,e)}}(a,c));return d};return a}();e.exports=new a()}),null);
__d("AdsMessengerVideoPreviewStore",["AdsDataAtom","AdsMessengerVideoPreviewDataManager","AdsMessengerVideoPreviewFetchErrorDataActionFlux","AdsMessengerVideoPreviewFetchSuccessDataActionFlux","FluxLoadObjectStore","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getActionTypes=function(){return g?[this.getActionTypeStartLoad(),b("AdsMessengerVideoPreviewFetchErrorDataActionFlux").actionType,b("AdsMessengerVideoPreviewFetchSuccessDataActionFlux").actionType]:null};d.reduce=function(a,c){c=c.action;var d=c.data&&c.data.key;switch(c.actionType){case b("AdsMessengerVideoPreviewFetchSuccessDataActionFlux").actionType:var e=c.data.url;return this.__handleOne(a,d,{url:e});case b("AdsMessengerVideoPreviewFetchErrorDataActionFlux").actionType:e=c.data.error;return this.__handleOne(a,d,{error:e});default:return a}};d.__load=function(a){a&&b("AdsMessengerVideoPreviewDataManager").getVideoPreview(a)};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsMessengerVideoStore",["AdsDataAtom","AdsMessengerVideoUploadDataManager","AdsMessengerVideoUploadErrorDataActionFlux","AdsMessengerVideoUploadResetDataActionFlux","AdsMessengerVideoUploadStartDataActionFlux","AdsMessengerVideoUploadSuccessDataActionFlux","FluxReduceStore","LoadObject","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("AdsDataAtom"))||this}var d=c.prototype;d.getInitialState=function(){return b("LoadObject").empty()};d.__getActionTypes=function(){return g?[b("AdsMessengerVideoUploadErrorDataActionFlux").actionType,b("AdsMessengerVideoUploadResetDataActionFlux").actionType,b("AdsMessengerVideoUploadStartDataActionFlux").actionType,b("AdsMessengerVideoUploadSuccessDataActionFlux").actionType]:null};d.reduce=function(a,c){c=c.action;switch(c.actionType){case b("AdsMessengerVideoUploadResetDataActionFlux").actionType:return b("LoadObject").empty();case b("AdsMessengerVideoUploadStartDataActionFlux").actionType:this.$AdsMessengerVideoStore1(c.videoFile,c.pageID);return b("LoadObject").loading();case b("AdsMessengerVideoUploadSuccessDataActionFlux").actionType:return b("LoadObject").withValue({videoID:c.videoID});case b("AdsMessengerVideoUploadErrorDataActionFlux").actionType:return b("LoadObject").withError(new Error(JSON.stringify(this.$AdsMessengerVideoStore2(c.error.message))));default:return a}};d.$AdsMessengerVideoStore2=function(a){a=JSON.parse(a);a=a&&a.message;a=a&&JSON.parse(a);a=a&&a.error;var b;a&&(b={error_code:a.error_subcode,error_title:a.error_user_title,error_message:a.error_user_msg});return{video_api:b}};d.$AdsMessengerVideoStore1=function(a,c){a&&c&&b("AdsMessengerVideoUploadDataManager").uploadVideo(a,c)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("adsMessengerDataModelGetVideoID",["AdsMessengerJSONPaths","getByPath"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("getByPath")(a,b("AdsMessengerJSONPaths").VIDEO_FORMAT.MESSAGE.ATTACHMENT.PAYLOAD.ATTACHMENT_ID);return a?String(a):null}e.exports=a}),null);
__d("adsMessengerDataModelSetLandingScreenType",["AdsMessengerJSONPaths","setByPath"],(function(a,b,c,d,e,f){"use strict";function a(a,c){b("setByPath")(a,b("AdsMessengerJSONPaths").LANDING_SCREEN_TYPE,c);return a}e.exports=a}),null);
__d("AdsUEditorMessengerContentEditorSelectors",["AdsAccountUtils","AdsAPIAdgroupPaths","AdsBulkValueUtils","AdsMessengerJSONMediaFormatType","AdsMessengerJSONPaths","AdsMessengerPageWelcomeMessageListDataProvider","AdsMessengerUtils","AdsMessengerVideoPreviewStore","AdsMessengerVideoStore","AdsMessengerVisualEditorLandingScreenType","AdsMessengerVisualEditorUtils","AdsMessengerWelcomeMessageFields","AdsPageStore","AdsUEditorAdgroupBulkSelectors","AdsUEditorAdgroupSetPageWelcomeMessageDataAction","AdsUEditorHostIDs","AdsUnifiedCreativeAPIFields","AdsUniformValue","MessengerContentEditorSurface","adsCreateAdAccountQESelector","adsCreateSelector","adsCreateStoreSelector","adsCreateStructuredSelector","adsMessengerDataModelGetLandingScreenType","adsMessengerDataModelGetMediaFormat","adsMessengerDataModelGetVideoID","adsUEditorAccountSelector","adsUEditorAdObjectsForSelectedAdgroupsSelector","adsUEditorMessengerVisualEditorQESelector","adsUEditorSelectedAdgroupIDsSelector","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageID),h=b("AdsUEditorAdgroupBulkSelectors").errorMessageSelectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),i=b("AdsUEditorAdgroupBulkSelectors").errorMessageSpecSelectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE),j=b("AdsUEditorAdgroupBulkSelectors").selectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_ID),k=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),g],function(a,c,d){a=v(a);c=c instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c):null;d=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(d,null);c||(c=b("AdsMessengerUtils").getLastUsedPageWelcomeMessage(d));if(!c)return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").VISUAL_EDITOR,a);else try{return JSON.parse(c)}catch(c){return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").VISUAL_EDITOR,a)}},{name:e.id}),l=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("AdsUEditorAdgroupBulkSelectors").selectorByPath(b("AdsAPIAdgroupPaths").CREATIVE.MESSENGER_SPONSORED_MESSAGE)],function(a,c){c=c instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c):null;a=v(a);var d=j;d=d instanceof b("AdsUniformValue")?d.getValue():null;if(!c)return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").SPONSORED_MESSAGES,a);else try{return JSON.parse(c)}catch(c){return b("AdsMessengerUtils").getVisualEditorDefaultJSON(!0,d,b("MessengerContentEditorSurface").SPONSORED_MESSAGES,a)}},{name:e.id+".adsUEditorMessengerSponsoredMessageSelector"}),m=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorAdObjectsForSelectedAdgroupsSelector")],function(a,c){return c.every(function(a){return b("AdsMessengerUtils").isMessengerSponsoredMessageSelected(a.campaign)})},{name:e.id+".isMessengerSponsoredMessageSelector"});function n(a,c,d){__p&&__p();var e={videoID:null,videoURL:null,isLoading:!1,videoErrorSpec:null};if(d)return e;d=c instanceof b("AdsUniformValue")&&c.getValue();if(!d)return e;if(b("adsMessengerDataModelGetMediaFormat")(a)!==b("AdsMessengerJSONMediaFormatType").VIDEO)return e;c=b("AdsMessengerVideoStore").getState();if(!c.isEmpty())return o(c,d);c=b("adsMessengerDataModelGetVideoID")(a);return!c?e:babelHelpers["extends"]({},p(c,d),{videoID:c,videoErrorSpec:null})}function o(a,b){__p&&__p();var c=q(a),d=a.isLoading(),e={videoID:null,videoURL:null,isLoading:d,videoErrorSpec:c};if(!a.hasValue())return e;a=a.getValue();if(!a)return e;a=a.videoID;if(!a)return e;e=p(a,b);b=e.videoURL;e=e.isLoading;return{videoID:a,videoURL:b,isLoading:d||e,videoErrorSpec:c}}function p(a,c){a=b("AdsMessengerUtils").getMessengerVideoKey(a,c);c=b("AdsMessengerVideoPreviewStore").get(a);a=c.getValue();return{videoURL:a?a.url:null,isLoading:c.isLoading()}}function q(a){if(!a.hasError())return null;a=b("getByPath")(a.getError(),["message"]);return a?JSON.parse(a):null}a=b("adsCreateStoreSelector")(function(a){return[].concat(l.getStores(a),k.getStores(a),s.getStores(a),g.getStores(a),b("adsUEditorAccountSelector").getStores(a),h.getStores(a),m.getStores(a),j.getStores(a),i.getStores(a),v.getStores(a),b("adsUEditorMessengerVisualEditorQESelector").getStores(a),[b("AdsMessengerVideoStore"),b("AdsMessengerVideoPreviewStore")])},function(a){var c=m(a),d=c?l(a):k(a),e=c?j(a):g(a),f=b("adsUEditorAccountSelector")(a),o=c?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(i(a)):b("AdsBulkValueUtils").getUniformValue_DEPRECATED(h(a),null),p=v(a),q=b("AdsAccountUtils").hasCapability(f,"API_VALIDATIONS_FOR_SPONSORED_MESSAGES"),r=n(d,e,c),s=r.videoID,t=r.videoURL,u=r.isLoading;r=r.videoErrorSpec;r=r||o;o=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(e,null);o=!!b("AdsMessengerUtils").getIsMessengerPlatformBotGetStartedEnabled(o);var w=!1;c||(w=b("adsUEditorMessengerVisualEditorQESelector")(a));return{accountID:f.account_id,canUseJSONInSponsoredMessages:q,errorSpec:r,isLoading:u,isNewContent:!0,isVisualEditorRedesign:w,json:d,pageID:e,videoID:s,videoURL:t,isSponsoredMessage:c,defaultFormatType:p,isGetStartedEnabled:o}},e.id+".adsUEditorMessengerVisualEditorSelector");c=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorSelectedAdgroupIDsSelector"),a],function(a,b,c){return{accountID:c.accountID,canUseJSONInSponsoredMessages:c.canUseJSONInSponsoredMessages,defaultFormatType:c.defaultFormatType,errorSpec:c.errorSpec,ids:b,isLoading:c.isLoading,isNewContent:!0,isSuggestedReply:!0,json:c.json,pageID:c.pageID,videoID:c.videoID,videoURL:c.videoURL,isSponsoredMessage:c.isSponsoredMessage,isGetStartedEnabled:c.isGetStartedEnabled&&!c.isSponsoredMessage}},{name:e.id});d=b("adsCreateSelector")([b("adsUEditorAccountSelector"),a,b("adsUEditorSelectedAdgroupIDsSelector"),b("adsUEditorAdObjectsForSelectedAdgroupsSelector"),g],function(a,c,d,e,f){return{accountID:a.account_id,defaultFormatType:c.defaultFormatType,errorSpec:c.errorSpec,ids:d,isGetStartedEnabled:c.isGetStartedEnabled,isMessengerInlineVisualEditorEnabled:!b("AdsMessengerUtils").isMessagesInlineVisualEditorDisabled(a,e),isMessengerVisualEditorVideoEnabled:!0,isNewContent:!0,isOnlyMessengerPromotedObjectType:b("AdsMessengerUtils").isOnlyMessengerPromotedObjectType(e),message:JSON.stringify(c.json),pageID:b("AdsBulkValueUtils").getUniformValue_DEPRECATED(c.pageID)}},{name:e.id});f=b("adsCreateSelector")([b("adsUEditorAccountSelector")],function(a){return b("AdsAccountUtils").hasCapability(a,"MESSENGER_ADS_VISUAL_EDITOR_REDESIGN")},{name:e.id});var r=b("adsCreateAdAccountQESelector")("ctm_ads_ve_redesign"),s=b("adsCreateSelector")([b("adsUEditorAccountSelector"),m,b("adsUEditorMessengerVisualEditorQESelector"),g,r],function(a,c,d,e,f){var g=!1;c||(g=d);d=!1;f.hasValue()&&(d=f.getValueEnforcing().getParamBool("is_ve_redesign",!1));f=b("AdsAccountUtils").hasCapability(a,"CTM_ADS_PARTIAL_AUTOMATED_PRE_REG");a=b("AdsBulkValueUtils").getUniformValueOrDefault(e,null);return{isFollowUpStyle:f,isNewContent:!0,isSponsoredMessage:c,isVisualEditorRedesign:g,isCtmAdsVERedesignTest:d,shouldShowMessengerSetup:a!=null}},{name:e.id}),t=b("adsCreateStructuredSelector")({welcomeMessageList:b("AdsMessengerPageWelcomeMessageListDataProvider").toFluxSelector()},e.id+".pageWelcomeMessageListSelector");r=b("adsCreateSelector")([g,t],function(a){__p&&__p();a=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(a,null);var c=!1,d=null;if(!a)return{customTemplatesList:d,isCustomTemplatesListLoading:c};a=t().welcomeMessageList.get(a);c=a.isLoading();if(!c){d=a.getValue();if(d){d=d.data.filter(function(a){return a&&a.template_name&&a.time_created&&a.page_welcome_message_body});if(d.length>1){a=d.splice(0,1);d=d.filter(function(a){try{a=JSON.parse(a.page_welcome_message_body);a=b("getByPath")(a,[b("AdsMessengerWelcomeMessageFields").LANDING_SCREEN_TYPE]);return a!==b("AdsMessengerVisualEditorLandingScreenType").FOLLOW_UP}catch(a){return!0}});d=a.concat(d)}}}return{customTemplatesList:d,isCustomTemplatesListLoading:c}},{name:e.id+".customTemplatesListSelector"});var u=b("adsCreateStoreSelector")(function(a){return[].concat(k.getStores(a),g.getStores(a),[b("AdsMessengerVideoStore"),b("AdsMessengerVideoPreviewStore")])},function(a){var b=k(a);a=g(a);return n(b,a,!1)},e.id+".AdsUEditorMessengerExperienceVideoSelector");u=b("adsCreateSelector")([b("AdsUEditorAdgroupBulkSelectors").selectorByCreativeField(b("AdsUnifiedCreativeAPIFields").pageWelcomeMessage),u,b("adsUEditorSelectedAdgroupIDsSelector"),g,r],function(a,c,d,e,f){__p&&__p();a=a instanceof b("AdsUniformValue")?b("AdsBulkValueUtils").getUniformValue_DEPRECATED(a):null;e=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(e,null);var g=null,h=null,i=b("AdsMessengerVisualEditorLandingScreenType").WELCOME_MESSAGE;if(a){var j=null;try{j=JSON.parse(a)}catch(c){a=JSON.stringify(b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(e)),b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:b("AdsUEditorHostIDs").CREATION,adgroupIDs:d,pageWelcomeMessage:a},{line:"644",module:"AdsUEditorMessengerContentEditorSelectors.js"})}if(j!==null){var k=b("getByPath")(j,b("AdsMessengerJSONPaths").TEMPLATE_ID),l=f.customTemplatesList;l&&l.some(function(a){return a.id===k})&&(g=l.find(function(a){return a.id===k}),h=k);i=b("adsMessengerDataModelGetLandingScreenType")(j)}}else{l=b("AdsMessengerVisualEditorUtils").getStandardTemplateDefaultJSON(e);a=JSON.stringify(l);b("AdsUEditorAdgroupSetPageWelcomeMessageDataAction").dispatch({hostID:b("AdsUEditorHostIDs").CREATION,adgroupIDs:d,pageWelcomeMessage:a},{line:"672",module:"AdsUEditorMessengerContentEditorSelectors.js"})}return babelHelpers["extends"]({},f,{isVideoLoading:c.isLoading,landingScreenType:i,selectedTemplate:g,selectedTemplateID:h},c,{welcomeMessage:a})},{name:e.id+".AdsUEditorVisualEditorRedesignWelcomMessageSelector"});r=b("adsCreateSelector")([b("adsUEditorAccountSelector"),b("adsUEditorSelectedAdgroupIDsSelector"),g,u,h,b("AdsPageStore").getSelector],function(a,c,d,e,f,g){__p&&__p();d=b("AdsBulkValueUtils").getUniformValue_DEPRECATED(d,null);f=e.videoErrorSpec||b("AdsBulkValueUtils").getUniformValueOrDefault(f,null);var h=b("AdsAccountUtils").hasCapability(a,"CTM_ADS_PARTIAL_AUTOMATED_CREATION_BETA"),i=b("AdsMessengerUtils").getIsMessengerPlatformBotGetStartedEnabled(d);g=d!=null&&d!==""?g(d).name:void 0;h||(e.customTemplatesList=e.customTemplatesList&&e.customTemplatesList.filter(function(a){try{a=b("AdsMessengerUtils").getLandingScreenType(a.page_welcome_message_body);return a!==b("AdsMessengerVisualEditorLandingScreenType").CTM_LEAD_GEN_NEW}catch(a){return!0}}));return babelHelpers["extends"]({},e,{accountID:a.account_id,adgroupIDs:c,errorSpec:f,isCTMLeadGenBetaDesign:h,isGetStartedEnabled:!!i,pageID:d,pageName:g})},{name:e.id});var v=b("adsCreateSelector")([b("adsUEditorAccountSelector")],function(a){return b("AdsMessengerJSONMediaFormatType").TEXT},{name:e.id+".adsUEditorVisualEditorDefaultJSONFormatSelector"});e.exports={adsUEditorPageWelcomeMessageSelector:k,adsUEditorMessengerContentEditorSelector:c,adsUEditorMessengerContentFieldSelector:d,adsUEditorMessengerExperienceEditorSelector:r,adsUEditorMessengerVisualEditorSelector:a,adsUEditorVisualEditorContentSelector:s,isVisualEditorRedesignSelector:f}}),null);