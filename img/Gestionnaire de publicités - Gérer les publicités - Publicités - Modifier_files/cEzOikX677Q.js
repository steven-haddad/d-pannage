if (self.CavalryLogger) { CavalryLogger.start_js(["dVHMh"]); }

__d("AdPreviewMode",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({AD_VIEW:null,POST_CLICK:null});e.exports=a}),null);
__d("tabSwitched",["AdPreviewMode","Arbiter","CSS","DOMQuery"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Arbiter").inform("AdPreview/TabSwitched",a)}function c(a){var c=b("DOMQuery").getRootElement(),d=b("DOMQuery").find(c,"iframe[id='"+a.adViewElementID+"']");c=b("DOMQuery").find(c,"div[id='"+a.postClickElementID+"']");a.tabName===b("AdPreviewMode").AD_VIEW?(b("CSS").show(d),b("CSS").hide(c)):a.tabName===b("AdPreviewMode").POST_CLICK&&(b("CSS").hide(d),b("CSS").show(c))}e.exports={informTabSwitched:a,handleTabSwitched:c}}),null);
__d("stopIframe",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.contentWindow;a.stop?a.stop():a.document.execCommand&&a.document.execCommand("Stop")}e.exports=a}),null);
__d("AdPreviewIFramePOSTRequest",["Arbiter","CSS","DOM","DOMEventListener","Form","lowerFacebookDomain","stopIframe","tabSwitched"],(function(a,b,c,d,e,f){__p&&__p();var g=b("tabSwitched").handleTabSwitched;function h(a,c){if(!c)return;var d=b("DOMEventListener").add(a,"load",function(){if(!c)return;b("CSS").hide(c);d.remove();b("Arbiter").inform("AdPreview/IFrameLoadSuccess",{iframe:a})});b("CSS").show(c)}a={init:function(a,c,d,e,f){__p&&__p();function i(){h(e,f),b("Form").post(a,c,d)}b("lowerFacebookDomain")();i();return b("Arbiter").subscribe(["contextualLayer/toggle","AdPreview/TabSwitched"],function(a,c){switch(a){case"contextualLayer/toggle":if(!b("DOM").contains(c.contentRoot,e))break;c.show?i():b("stopIframe")(e);break;case"AdPreview/TabSwitched":g(c);break}})}};e.exports=a}),null);