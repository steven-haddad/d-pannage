if (self.CavalryLogger) { CavalryLogger.start_js(["S8FBQ"]); }

__d("AdsInstagramInteractiveComponentConstants",["ApiInteractiveComponentFields","ApiInteractiveComponentPollSpecFields","ApiInteractiveComponentPositionSpecFields","immutable"],(function(a,b,c,d,e,f){"use strict";c=b("immutable").Map((a={},a[b("ApiInteractiveComponentPositionSpecFields").X]=.5,a[b("ApiInteractiveComponentPositionSpecFields").Y]=.5,a[b("ApiInteractiveComponentPositionSpecFields").WIDTH]=.65,a[b("ApiInteractiveComponentPositionSpecFields").HEIGHT]=1,a[b("ApiInteractiveComponentPositionSpecFields").ROTATION]=0,a));f=b("immutable").Map((d={},d[b("ApiInteractiveComponentPollSpecFields").QUESTION_TEXT]="Poll Question",d[b("ApiInteractiveComponentPollSpecFields").OPTION_A_TEXT]="option 1",d[b("ApiInteractiveComponentPollSpecFields").OPTION_B_TEXT]="option 2",d));d=b("immutable").List([b("immutable").Map((a={},a[b("ApiInteractiveComponentFields").TYPE]="poll",a[b("ApiInteractiveComponentFields").POSITION_SPEC]=c,a[b("ApiInteractiveComponentFields").POLL_SPEC]=f,a))]);c={DEFAULT_INDEX:0,DEFAULT_OPTION_TEXT_SIZE:30,DEFAULT_POLLING_STICKER_HEIGHT:64,DEFAULT_POLLING_STICKER_WIDTH:204,FRAME_WIDTH:318,FRAME_HEIGHT:565,MAX_OPTION_TEXT_LINE_COUNT:4,MAX_OPTION_TEXT_SIZE:30,MAX_POSITION_INPUT:100,MAX_POSITION_TEXT_LENGTH:7,MAX_ROTATION_DEGREE:90,MAX_STICKER_WIDTH:100,MIN_OPTION_TEXT_SIZE:10,MIN_POSITION_INPUT:0,MIN_ROTATION_DEGREE:-90,MIN_STICKER_WIDTH:0,OPTION_BOX_TEXT_BLOCK_HEIGHT:54,OPTION_BOX_TEXT_BLOCK_WIDTH:85,POSITION_TEXTAREA_HEIGHT:16,DEFAULT_COMPONENTS_SPEC:d};e.exports=c}),null);
__d("AdsInstagramPollingSticker.react",["cx","AdsInstagramInteractiveComponentConstants","EmojiRenderer","InstagramAdsPreview","React","Style"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramInteractiveComponentConstants").DEFAULT_OPTION_TEXT_SIZE,i=b("AdsInstagramInteractiveComponentConstants").DEFAULT_POLLING_STICKER_WIDTH;a=b("AdsInstagramInteractiveComponentConstants").FRAME_HEIGHT;var j=b("AdsInstagramInteractiveComponentConstants").FRAME_WIDTH,k=b("AdsInstagramInteractiveComponentConstants").MAX_OPTION_TEXT_LINE_COUNT,l=b("AdsInstagramInteractiveComponentConstants").MAX_OPTION_TEXT_SIZE,m=b("AdsInstagramInteractiveComponentConstants").MIN_OPTION_TEXT_SIZE,n=b("AdsInstagramInteractiveComponentConstants").OPTION_BOX_TEXT_BLOCK_HEIGHT,o=b("AdsInstagramInteractiveComponentConstants").OPTION_BOX_TEXT_BLOCK_WIDTH;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$4=function(a){c.$1=a},c.$5=function(a){c.$2=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,b=this.props.media;if(b&&b instanceof HTMLElement){var c=function(){a.$3(a.$1),a.$3(a.$2),a.props.onMediaLoaded&&a.props.onMediaLoaded(b.offsetHeight,b.offsetWidth)};b instanceof window.HTMLMediaElement?b.addEventListener("canplaythrough",c):b instanceof window.HTMLImageElement&&(b.onload=c)}else this.$3(this.$1),this.$3(this.$2)};d.getSnapshotBeforeUpdate=function(){this.$1&&b("Style").set(this.$1,"maxHeight","54px");this.$2&&b("Style").set(this.$2,"maxHeight","54px");return null};d.componentDidUpdate=function(){this.$3(this.$1),this.$3(this.$2)};d.$3=function(a){__p&&__p();if(!a||!a.offsetHeight)return;b("InstagramAdsPreview").setDynamicTextSizeForCaption(a,n-1,o,k,l,m);var c=(n-a.offsetHeight)/2;if(a.offsetHeight>=n){var d=parseInt(window.getComputedStyle(a,null).getPropertyValue("line-height"),10);d=d*k;b("Style").set(a,"maxHeight",d+"px");c=(n-d)/2}b("Style").set(a,"bottom",c+"px")};d.render=function(){__p&&__p();var a,c,d,e,f,g=this.props,k=g.component,l=g.height;g=g.width;a=this.$6((a=k.position_spec)==null?void 0:a.x)*g;c=this.$6((c=k.position_spec)==null?void 0:c.y)*l;d=this.$6((d=k.position_spec)==null?void 0:d.width)*j/i;e=360*this.$6((e=k.position_spec)==null?void 0:e.rotation);e="rotate("+e+"deg) scale("+d+")";d=((d=this.props.component.poll_spec)==null?void 0:d.option_a_text)||"";typeof d==="string"&&(d=d.toUpperCase());f=((f=this.props.component.poll_spec)==null?void 0:f.option_b_text)||"";typeof f==="string"&&(f=f.toUpperCase());return b("React").createElement("div",{className:"_6se2",style:{height:l,width:g,top:c,left:a,transform:e}},b("React").createElement("div",{className:"_6sfb"}),b("React").createElement("div",{className:"_6sfc"}),b("React").createElement("text",{className:"_6sfd",style:{fontFamily:"SFUIText-Heavy"}},(l=k.poll_spec)==null?void 0:l.question_text),b("React").createElement("div",{className:"_6sfe"},b("React").createElement("div",{className:"_6sff",ref:this.$4,style:{fontFamily:"aveny t reg",fontSize:h}},this.$7(d))),b("React").createElement("div",{className:"_6sfg"},b("React").createElement("div",{className:"_6sfh",ref:this.$5,style:{fontFamily:"aveny t reg",fontSize:h}},this.$7(f))))};d.$6=function(a){a=parseFloat(a);return typeof a==="number"?a:0};d.$7=function(a){var c=b("EmojiRenderer").parse(a),d=[],e=0;c.forEach(function(b){e<b.offset&&d.push({isEmoji:!1,text:a.substr(e,b.offset-e)}),d.push({isEmoji:!0,text:b.emoji.join("")}),e=b.offset+b.length});e<a.length&&d.push({isEmoji:!1,text:a.substr(e,a.length-e)});return b("React").createElement("div",null,d.map(function(a,c){return b("React").createElement("span",{className:a.isEmoji?"":"_6-0b",key:c},a.text)}))};return c}(b("React").PureComponent);c.defaultProps={height:a,width:j};e.exports=c}),null);
__d("InteractiveComponentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({POLL:1})}),null);
__d("AdsInstagramInteractiveComponentList.react",["cx","AdsInstagramInteractiveComponentConstants","AdsInstagramPollingSticker.react","InteractiveComponentType","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramInteractiveComponentConstants").FRAME_HEIGHT,i=b("AdsInstagramInteractiveComponentConstants").FRAME_WIDTH;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={height:h,width:i},c.$1=function(a,b){c.setState({height:a,width:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;if(!this.props.components||this.props.components.size<1)return null;var c=this.props.components.map(function(c,d){return c.type===b("InteractiveComponentType").POLL?b("React").createElement(b("AdsInstagramPollingSticker.react"),{component:c,height:a.state.height,key:d,media:a.props.media,width:a.state.width,onMediaLoaded:a.$1}):null});return b("React").createElement("div",{className:"_6se1",style:{height:this.state.height}},c)};return c}(b("React").PureComponent);e.exports=a}),null);