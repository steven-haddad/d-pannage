if (self.CavalryLogger) { CavalryLogger.start_js(["W7sxi"]); }

__d("BusinessManagerNotificationsSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2375554172487069",queryID:"584010498721203"})}),null);
__d("BusinessManagerNotificationsSubscription",["BaseGraphQLSubscription","BusinessManagerNotificationsSubscriptionWebGraphQLSubscription","WebPixelRatio","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ADS_UNIFIED_NAV";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/actor_id_"+a.businessUserID+"_environment_"+g};d.getQueryID=function(){return b("BusinessManagerNotificationsSubscriptionWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),environment:g}),is_work_user:!1,scale:b("WebPixelRatio").get()}};d.getSubscriptionCallName=function(){return"web_notification_receive_subscribe"};d.getViewerID=function(a){a=a.businessUserID;return a};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("BusinessManagerNotificationSubscriptions",["Arbiter","BizNotificationBucketingUtils","BusinessManagerNotificationsSubscription","BusinessUserConf","ChannelConstants","NotificationTokens","createNotificationSubscriptions","createObjectFrom","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=b("createNotificationSubscriptions")({subscribeToNotificationHides:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notification_hidden"),function(c,d){c=b("NotificationTokens").tokenizeIDs([d.obj.notif_id+""]);d=d.obj.state===1;a(b("createObjectFrom")(c,d))})},subscribeToNotificationReadnessUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_read"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToNotificationSeenStateUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_seen"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToRealtimeChannelNotifications:function(a){return b("BusinessUserConf").businessUserID!==null?b("BusinessManagerNotificationsSubscription").subscribe({businessUserID:String(b("nullthrows")(b("BusinessUserConf").businessUserID))},function(c){c=c.web_notification_receive_subscribe.aggregated_notification;a(c?[b("BizNotificationBucketingUtils").preProcessNodeForLiveSendBucketing(c)]:null,"BusinessManagerNotificationsPayloadPagelet")}):null}})}),null);
__d("BusinessManagerGlobalNotificationSubscriptionsSubscription",["BusinessManagerNotificationSubscriptions"],(function(a,b,c,d,e,f){"use strict";e.exports=b("BusinessManagerNotificationSubscriptions").setup()}),null);
__d("BusinessManagerNotificationExceptionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:BusinessManagerNotificationExceptionLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:BusinessManagerNotificationExceptionLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BusinessManagerNotificationExceptionLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBusinessID=function(a){this.$1.business_id=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setExtraErrorData=function(a){this.$1.extra_error_data=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={business_id:!0,error_message:!0,event_name:!0,extra_error_data:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("BusinessManagerNotificationLogEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NOTIF_SYNC_ERROR:"notif_sync_error"})}),null);
__d("BusinessManagerNotificationsSyncQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1917258221721070"};b.getQueryID=function(){return"497831067351736"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("BusinessManagerNotificationSync",["invariant","Arbiter","BizSiteIdentifier.brands","BusinessManagerNotificationExceptionTypedLogger","BusinessManagerNotificationLogEvent","BusinessManagerNotificationsSyncQueryWebGraphQLQuery","ChannelConstants","CurrentUser","NotificationConstants","NotificationUpdates","WebGraphQL","WebPixelRatio","ifRequired","objectValues","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=0;function i(){var a={endpointControllerName:"BusinessManagerNotificationsPayloadPagelet"},c;b("ifRequired")("NotificationStore",function(d){c=b("objectValues")(d.getAll(a))});if(c==null)return null;var d=c.map(function(a){return a.creation_time}).filter(Boolean);return d.length===0?null:Math.max.apply(Math,d)}function j(){__p&&__p();var a=i();if(a==null)return;var c=b("BizSiteIdentifier.brands").getBusinessID();c!=null||g(0,6163);b("promiseDone")(b("WebGraphQL").exec(new(b("BusinessManagerNotificationsSyncQueryWebGraphQLQuery"))({business_id:c,is_work_user:b("CurrentUser").isWorkUser(),newer_than:a,scale:b("WebPixelRatio").get()})),function(a){__p&&__p();if(a){a=(a=a)!=null?(a=a.business)!=null?(a=a.viewer)!=null?(a=a.notifications)!=null?a.edges:a:a:a:a;a=a&&a.map(function(a){a=a.node;return a}).filter(Boolean);if(a==null)return;a={nodes:a};b("NotificationUpdates").handleUpdate(b("NotificationConstants").PayloadSourceType.SYNC,a)}},function(a){if(a){a=a.errors;Array.isArray(a)&&a.forEach(function(a){var d=JSON.stringify(a.error||a.repsonse);new(b("BusinessManagerNotificationExceptionTypedLogger"))().setBusinessID(c).setEventName(b("BusinessManagerNotificationLogEvent").NOTIF_SYNC_ERROR).setErrorMessage(a.message).setExtraErrorData(d).log()})}})}var k=null,l=0;a={setup:function(a){__p&&__p();l++;(h===null||a>h)&&(h=a);k==null&&(k=b("Arbiter").subscribe(b("ChannelConstants").ON_INVALID_HISTORY,j));var c=!1;return{remove:function(){if(c===!0)return;k!=null||g(0,51);c=!0;l--;l===0&&(k.unsubscribe(),k=null)}}}};e.exports=a}),null);
__d("BusinessManagerGlobalNotificationSyncSubscription",["BusinessManagerNotificationSync","InitialServerTime"],(function(a,b,c,d,e,f){"use strict";e.exports=b("BusinessManagerNotificationSync").setup(b("InitialServerTime").serverTime)}),null);